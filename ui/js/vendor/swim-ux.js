// swim-ux-3.9.0; copyright 2015-2019 SWIM.AI inc.
!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports,require("@swim/angle"),require("@swim/length"),require("@swim/color"),require("@swim/font"),require("@swim/view"),require("@swim/typeset"),require("@swim/math"),require("@swim/shape"),require("@swim/collections"),require("@swim/time"),require("@swim/scale"),require("@swim/interpolate"),require("@swim/transition"),require("@swim/style"),require("@swim/util"),require("@swim/gesture"),require("@swim/codec"),require("@swim/transform"),require("mapbox-gl")):"function"==typeof define&&define.amd?define(["exports","@swim/angle","@swim/length","@swim/color","@swim/font","@swim/view","@swim/typeset","@swim/math","@swim/shape","@swim/collections","@swim/time","@swim/scale","@swim/interpolate","@swim/transition","@swim/style","@swim/util","@swim/gesture","@swim/codec","@swim/transform","mapbox-gl"],e):e((t=t||self).swim=t.swim||{},t.swim,t.swim,t.swim,t.swim,t.swim,t.swim,t.swim,t.swim,t.swim,t.swim,t.swim,t.swim,t.swim,t.swim,t.swim,t.swim,t.swim,t.swim,t.mapboxgl)}(this,function(t,e,i,o,r,n,a,s,l,h,u,d,c,p,m,f,v,y,g,b){"use strict";var x=function(t,e){return(x=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)};function k(t,e){function i(){this.constructor=t}x(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}function _(t,e,i,o){var r,n=arguments.length,a=n<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,i,o);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(a=(n<3?r(a):n>3?r(e,i,a):r(e,i))||a);return n>3&&a&&Object.defineProperty(e,i,a),a}var A,w=function(t){function h(){var e=t.call(this)||this;return e.value.setState(0),e.total.setState(1),e._arrangement="auto",e}return k(h,t),Object.defineProperty(h.prototype,"viewController",{get:function(){return this._viewController},enumerable:!0,configurable:!0}),h.prototype.label=function(t){return void 0===t?this.getChildView("label"):(null===t||t instanceof n.View||(t=a.TextRunView.fromAny(t)),this.setChildView("label",t),this)},h.prototype.legend=function(t){return void 0===t?this.getChildView("legend"):(null===t||t instanceof n.View||(t=a.TextRunView.fromAny(t)),this.setChildView("legend",t),this)},h.prototype.arrangement=function(t){return void 0===t?this._arrangement:(this._arrangement=t,this)},h.prototype.onAnimate=function(t){this.value.onFrame(t),this.total.onFrame(t),this.innerRadius.onFrame(t),this.outerRadius.onFrame(t),this.startAngle.onFrame(t),this.deltaAngle.onFrame(t),this.cornerRadius.onFrame(t),this.dialColor.onFrame(t),this.meterColor.onFrame(t),this.labelPadding.onFrame(t),this.tickAlign.onFrame(t),this.tickRadius.onFrame(t),this.tickLength.onFrame(t),this.tickWidth.onFrame(t),this.tickPadding.onFrame(t),this.tickColor.onFrame(t),this.font.onFrame(t),this.textColor.onFrame(t)},h.prototype.onRender=function(t){t.save();var e=this._bounds,i=this._anchor;this.renderDial(t,e,i),t.restore(),this.renderTick(t,e,i)},h.prototype.renderDial=function(t,o,r){var a=Math.min(o.width,o.height),h=this.innerRadius.value.pxValue(a),u=this.outerRadius.value.pxValue(a),d=this.startAngle.value.radValue(),c=this.deltaAngle.value.radValue(),p=this.cornerRadius.value.pxValue(u-h),m=new l.Arc(i.Length.px(h),i.Length.px(u),e.Angle.rad(d),e.Angle.rad(c),e.Angle.zero(),null,i.Length.px(p)),f=m.deltaAngle(c*this.value.value/(this.total.value||1));t.beginPath();var v=this.dialColor.value;t.fillStyle=v.toString(),m.render(t,o,r),t.fill(),t.clip(),t.beginPath();var y=this.meterColor.value;t.fillStyle=y.toString(),f.render(t,o,r),t.fill();var g=this.label();if(n.RenderView.is(g)){var b=(h+u)/2,x=b*Math.cos(d+1e-12),k=b*Math.sin(d+1e-12),_=void 0;_=x>=0?k>=0?"start":"end":k<0?"end":"start";var A=d-Math.PI/2,w=this.labelPadding.value.pxValue(u-h),M=w*Math.cos(A),C=w*Math.sin(A),P=new s.PointR2(r.x+x+M,r.y+k+C);g.setAnchor(P),n.TypesetView.is(g)&&(g.textAlign(_),g.textBaseline("middle"))}},h.prototype.renderTick=function(t,e,i){var o=this.legend();if(n.RenderView.is(o)){var r=e.width,a=e.height,l=Math.min(r,a),h=i.x,u=i.y,d=this.startAngle.value.radValue()+this.deltaAngle.value.radValue()*this.value.value/(this.total.value||1)*this.tickAlign.value,c=this.outerRadius.value.pxValue(l),p=this.tickRadius.value.pxValue(l),m=this.tickLength.value.pxValue(r),f=c*Math.cos(d+1e-12),v=c*Math.sin(d+1e-12),y=p*Math.cos(d+1e-12),g=p*Math.sin(d+1e-12),b=0;t.beginPath();var x=this.tickColor.value;t.strokeStyle=x.toString(),t.lineWidth=this.tickWidth.value.pxValue(l),t.moveTo(h+f,u+v),t.lineTo(h+y,u+g),m&&(y>=0?(t.lineTo(h+m,u+g),b=m-y):y<0&&(t.lineTo(h-m,u+g),b=m+y)),t.stroke();var k=void 0,_=void 0;y>=0?(k=b,_="end"):(k=-b,_="start");var A=new s.PointR2(h+y+k,u+g-this.tickPadding.value.pxValue(l));o.setAnchor(A),n.TypesetView.is(o)&&(n.FillView.is(o)&&o.fill(x),o.textAlign(_),o.textBaseline("alphabetic"))}},h.prototype.hitTest=function(e,i,o){var r=t.prototype.hitTest.call(this,e,i,o);if(null===r){o.save();var n=this.pixelRatio;e*=n,i*=n;var a=this._bounds,s=this._anchor;r=this.hitTestDial(e,i,o,a,s),o.restore()}return r},h.prototype.hitTestDial=function(t,o,r,n,a){var s=Math.min(n.width,n.height),h=this.innerRadius.value.pxValue(s),u=this.outerRadius.value.pxValue(s),d=this.startAngle.value.radValue(),c=this.deltaAngle.value.radValue(),p=this.cornerRadius.value.pxValue(u-h),m=new l.Arc(i.Length.px(h),i.Length.px(u),e.Angle.rad(d),e.Angle.rad(c),e.Angle.zero(),null,i.Length.px(p));return r.beginPath(),m.render(r,n,a),r.isPointInPath(t,o)?this:null},h.fromAny=function(t){if(t instanceof h)return t;if("object"==typeof t&&t){var e=new h;return void 0!==t.key&&e.key(t.key),void 0!==t.value&&e.value(t.value),void 0!==t.total&&e.total(t.total),void 0!==t.innerRadius&&e.innerRadius(t.innerRadius),void 0!==t.outerRadius&&e.outerRadius(t.outerRadius),void 0!==t.startAngle&&e.startAngle(t.startAngle),void 0!==t.deltaAngle&&e.deltaAngle(t.deltaAngle),void 0!==t.cornerRadius&&e.cornerRadius(t.cornerRadius),void 0!==t.dialColor&&e.dialColor(t.dialColor),void 0!==t.meterColor&&e.meterColor(t.meterColor),void 0!==t.labelPadding&&e.labelPadding(t.labelPadding),void 0!==t.tickAlign&&e.tickAlign(t.tickAlign),void 0!==t.tickRadius&&e.tickRadius(t.tickRadius),void 0!==t.tickLength&&e.tickLength(t.tickLength),void 0!==t.tickWidth&&e.tickWidth(t.tickWidth),void 0!==t.tickPadding&&e.tickPadding(t.tickPadding),void 0!==t.tickColor&&e.tickColor(t.tickColor),void 0!==t.font&&e.font(t.font),void 0!==t.textColor&&e.textColor(t.textColor),void 0!==t.arrangement&&e.arrangement(t.arrangement),void 0!==t.label&&e.label(t.label),void 0!==t.legend&&e.legend(t.legend),e}throw new TypeError(""+t)},_([n.MemberAnimator(Number)],h.prototype,"value",void 0),_([n.MemberAnimator(Number)],h.prototype,"total",void 0),_([n.MemberAnimator(i.Length)],h.prototype,"innerRadius",void 0),_([n.MemberAnimator(i.Length)],h.prototype,"outerRadius",void 0),_([n.MemberAnimator(e.Angle,"inherit")],h.prototype,"startAngle",void 0),_([n.MemberAnimator(e.Angle,"inherit")],h.prototype,"deltaAngle",void 0),_([n.MemberAnimator(i.Length,"inherit")],h.prototype,"cornerRadius",void 0),_([n.MemberAnimator(o.Color,"inherit")],h.prototype,"dialColor",void 0),_([n.MemberAnimator(o.Color,"inherit")],h.prototype,"meterColor",void 0),_([n.MemberAnimator(i.Length,"inherit")],h.prototype,"labelPadding",void 0),_([n.MemberAnimator(Number,"inherit")],h.prototype,"tickAlign",void 0),_([n.MemberAnimator(i.Length,"inherit")],h.prototype,"tickRadius",void 0),_([n.MemberAnimator(i.Length,"inherit")],h.prototype,"tickLength",void 0),_([n.MemberAnimator(i.Length,"inherit")],h.prototype,"tickWidth",void 0),_([n.MemberAnimator(i.Length,"inherit")],h.prototype,"tickPadding",void 0),_([n.MemberAnimator(o.Color,"inherit")],h.prototype,"tickColor",void 0),_([n.MemberAnimator(r.Font,"inherit")],h.prototype,"font",void 0),_([n.MemberAnimator(o.Color,"inherit")],h.prototype,"textColor",void 0),h}(n.GraphicView),M=function(t){function s(){var r=t.call(this)||this;return r.limit.setState(0),r.innerRadius.setState(i.Length.pct(30)),r.outerRadius.setState(i.Length.pct(40)),r.startAngle.setState(e.Angle.rad(-Math.PI/2)),r.deltaAngle.setState(e.Angle.rad(2*Math.PI)),r.cornerRadius.setState(i.Length.pct(50)),r.dialSpacing.setState(i.Length.px(1)),r.dialColor.setState(o.Color.transparent()),r.meterColor.setState(o.Color.black()),r.labelPadding.setState(i.Length.pct(25)),r.tickAlign.setState(.5),r.tickRadius.setState(i.Length.pct(45)),r.tickLength.setState(i.Length.pct(50)),r.tickWidth.setState(i.Length.px(1)),r.tickPadding.setState(i.Length.px(1)),r.tickColor.setState(o.Color.black()),r}return k(s,t),Object.defineProperty(s.prototype,"viewController",{get:function(){return this._viewController},enumerable:!0,configurable:!0}),s.prototype.title=function(t){return void 0===t?this.getChildView("title"):(null===t||t instanceof n.View||(t=a.TextRunView.fromAny(t)),this.setChildView("title",t),this)},s.prototype.addDial=function(t){t=w.fromAny(t),this.appendChildView(t)},s.prototype.onAnimate=function(t){this.limit.onFrame(t),this.innerRadius.onFrame(t),this.outerRadius.onFrame(t),this.startAngle.onFrame(t),this.deltaAngle.onFrame(t),this.cornerRadius.onFrame(t),this.dialSpacing.onFrame(t),this.dialColor.onFrame(t),this.meterColor.onFrame(t),this.labelPadding.onFrame(t),this.tickAlign.onFrame(t),this.tickRadius.onFrame(t),this.tickLength.onFrame(t),this.tickWidth.onFrame(t),this.tickPadding.onFrame(t),this.tickColor.onFrame(t),this.font.onFrame(t),this.textColor.onFrame(t)},s.prototype.didAnimate=function(e){this.layoutGauge(),t.prototype.didAnimate.call(this,e)},s.prototype.layoutGauge=function(){var t,e,o,r,a=this._bounds,s=Math.min(a.width,a.height),l=this._childViews,h=l.length,u=this.limit.value,d=this.innerRadius.value,c=this.outerRadius.value,p=this.startAngle.value,m=this.deltaAngle.value,f=this.dialSpacing.value;if(d&&c){for(var v=0,y=0;y<h;y+=1){(g=l[y])instanceof w&&"auto"===g._arrangement&&(v+=1)}t=d.pxValue(s),e=c.pxValue(s),o=f?f.pxValue(s):0,r=v>1?(e-t-o*(v-1))/v:e-t}for(y=0;y<h;y+=1){var g;if((g=l[y])instanceof w&&"auto"===g._arrangement){if(u&&isFinite(u)){var b=g.total();b&&g.total(Math.max(b,u))}d&&c&&(g.innerRadius(i.Length.px(t)).outerRadius(i.Length.px(t+r)),t=t+r+o),p&&g.startAngle(p),m&&g.deltaAngle(m)}}var x=this.title();n.TypesetView.is(x)&&(x.textAlign("center"),x.textBaseline("middle"))},s.fromAny=function(t){if(t instanceof s)return t;if("object"==typeof t&&t){var e=new s;void 0!==t.key&&e.key(t.key),void 0!==t.limit&&e.limit(t.limit),void 0!==t.innerRadius&&e.innerRadius(t.innerRadius),void 0!==t.outerRadius&&e.outerRadius(t.outerRadius),void 0!==t.startAngle&&e.startAngle(t.startAngle),void 0!==t.deltaAngle&&e.deltaAngle(t.deltaAngle),void 0!==t.cornerRadius&&e.cornerRadius(t.cornerRadius),void 0!==t.dialSpacing&&e.dialSpacing(t.dialSpacing),void 0!==t.dialColor&&e.dialColor(t.dialColor),void 0!==t.meterColor&&e.meterColor(t.meterColor),void 0!==t.labelPadding&&e.labelPadding(t.labelPadding),void 0!==t.tickAlign&&e.tickAlign(t.tickAlign),void 0!==t.tickRadius&&e.tickRadius(t.tickRadius),void 0!==t.tickLength&&e.tickLength(t.tickLength),void 0!==t.tickWidth&&e.tickWidth(t.tickWidth),void 0!==t.tickPadding&&e.tickPadding(t.tickPadding),void 0!==t.tickColor&&e.tickColor(t.tickColor),void 0!==t.font&&e.font(t.font),void 0!==t.textColor&&e.textColor(t.textColor),void 0!==t.title&&e.title(t.title);var i=t.dials;if(i)for(var o=0,r=i.length;o<r;o+=1)e.addDial(i[o]);return e}throw new TypeError(""+t)},_([n.MemberAnimator(Number)],s.prototype,"limit",void 0),_([n.MemberAnimator(i.Length)],s.prototype,"innerRadius",void 0),_([n.MemberAnimator(i.Length)],s.prototype,"outerRadius",void 0),_([n.MemberAnimator(e.Angle)],s.prototype,"startAngle",void 0),_([n.MemberAnimator(e.Angle)],s.prototype,"deltaAngle",void 0),_([n.MemberAnimator(i.Length)],s.prototype,"cornerRadius",void 0),_([n.MemberAnimator(i.Length)],s.prototype,"dialSpacing",void 0),_([n.MemberAnimator(o.Color)],s.prototype,"dialColor",void 0),_([n.MemberAnimator(o.Color)],s.prototype,"meterColor",void 0),_([n.MemberAnimator(i.Length)],s.prototype,"labelPadding",void 0),_([n.MemberAnimator(Number)],s.prototype,"tickAlign",void 0),_([n.MemberAnimator(i.Length)],s.prototype,"tickRadius",void 0),_([n.MemberAnimator(i.Length)],s.prototype,"tickLength",void 0),_([n.MemberAnimator(i.Length)],s.prototype,"tickWidth",void 0),_([n.MemberAnimator(i.Length)],s.prototype,"tickPadding",void 0),_([n.MemberAnimator(o.Color)],s.prototype,"tickColor",void 0),_([n.MemberAnimator(r.Font,"inherit")],s.prototype,"font",void 0),_([n.MemberAnimator(o.Color,"inherit")],s.prototype,"textColor",void 0),s}(n.GraphicView),C=function(t){function h(){var i=t.call(this)||this;return i.value.setState(0),i._total=1,i.phaseAngle.setState(e.Angle.zero()),i}return k(h,t),Object.defineProperty(h.prototype,"viewController",{get:function(){return this._viewController},enumerable:!0,configurable:!0}),h.prototype.total=function(t){return void 0===t?this._total:(this._total=t,this)},h.prototype.label=function(t){return void 0===t?this.getChildView("label"):(null===t||t instanceof n.View||(t=a.TextRunView.fromAny(t)),this.setChildView("label",t),this)},h.prototype.legend=function(t){return void 0===t?this.getChildView("legend"):(null===t||t instanceof n.View||(t=a.TextRunView.fromAny(t)),this.setChildView("legend",t),this)},h.prototype.onAnimate=function(t){this.value.onFrame(t),this.innerRadius.onFrame(t),this.outerRadius.onFrame(t),this.phaseAngle.onFrame(t),this.padAngle.onFrame(t),this.padRadius.onFrame(t),this.cornerRadius.onFrame(t),this.labelRadius.onFrame(t),this.sliceColor.onFrame(t),this.tickAlign.onFrame(t),this.tickRadius.onFrame(t),this.tickLength.onFrame(t),this.tickWidth.onFrame(t),this.tickPadding.onFrame(t),this.tickColor.onFrame(t),this.font.onFrame(t),this.textColor.onFrame(t)},h.prototype.onRender=function(t){t.save();var e=this._bounds,i=this._anchor;this.renderSlice(t,e,i),this.renderTick(t,e,i),t.restore()},h.prototype.renderSlice=function(t,o,r){var a=Math.min(o.width,o.height),h=this.innerRadius.value.pxValue(a),u=this.outerRadius.value.pxValue(a),d=this.phaseAngle.value.radValue(),c=2*Math.PI*this.value.value/(this._total||1),p=this.padAngle.value,m=this.padRadius.value||null,f=this.cornerRadius.value.pxValue(u-h),v=new l.Arc(i.Length.px(h),i.Length.px(u),e.Angle.rad(d),e.Angle.rad(c),p,m,i.Length.px(f));t.beginPath();var y=this.sliceColor.value;t.fillStyle=y.toString(),v.render(t,o,r),t.fill();var g=this.label();if(n.RenderView.is(g)){var b=d+c/2,x=h+this.labelRadius.value.pxValue(u-h),k=x*Math.cos(b),_=x*Math.sin(b),A=new s.PointR2(r.x+k,r.y+_);g.setAnchor(A),n.TypesetView.is(g)&&(g.textAlign("center"),g.textBaseline("middle"))}},h.prototype.renderTick=function(t,e,i){var o=this.legend();if(n.RenderView.is(o)){var r=e.width,a=e.height,l=Math.min(r,a),h=i.x,u=i.y,d=this.phaseAngle.value.radValue()+Math.min(2*Math.PI*this.value.value/(this._total||1),2*Math.PI)*this.tickAlign.value,c=this.outerRadius.value.pxValue(l),p=this.tickRadius.value.pxValue(l),m=this.tickLength.value.pxValue(r),f=c*Math.cos(d+1e-12),v=c*Math.sin(d+1e-12),y=p*Math.cos(d+1e-12),g=p*Math.sin(d+1e-12),b=0;t.beginPath();var x=this.tickColor.value;t.strokeStyle=x.toString(),t.lineWidth=this.tickWidth.value.pxValue(l),t.moveTo(h+f,u+v),t.lineTo(h+y,u+g),m&&(y>=0?(t.lineTo(h+m,u+g),b=m-y):y<0&&(t.lineTo(h-m,u+g),b=m+y)),t.stroke();var k=void 0,_=void 0;y>=0?(k=b,_="end"):(k=-b,_="start");var A=new s.PointR2(h+y+k,u+g-this.tickPadding.value.pxValue(l));o.setAnchor(A),n.TypesetView.is(o)&&(n.FillView.is(o)&&o.fill(x),o.textAlign(_),o.textBaseline("alphabetic"))}},h.prototype.hitTest=function(e,i,o){var r=t.prototype.hitTest.call(this,e,i,o);if(null===r){o.save();var n=this.pixelRatio;e*=n,i*=n;var a=this._bounds,s=this._anchor;r=this.hitTestSlice(e,i,o,a,s),o.restore()}return r},h.prototype.hitTestSlice=function(t,o,r,n,a){var s=Math.min(n.width,n.height),h=this.innerRadius.value.pxValue(s),u=this.outerRadius.value.pxValue(s),d=this.phaseAngle.value.radValue(),c=2*Math.PI*this.value.value/(this._total||1),p=this.padAngle.value,m=this.padRadius.value||null,f=this.cornerRadius.value.pxValue(u-h),v=new l.Arc(i.Length.px(h),i.Length.px(u),e.Angle.rad(d),e.Angle.rad(c),p,m,i.Length.px(f));return r.beginPath(),v.render(r,n,a),r.isPointInPath(t,o)?this:null},h.fromAny=function(t){if(t instanceof h)return t;if("object"==typeof t&&t){var e=new h;return void 0!==t.key&&e.key(t.key),void 0!==t.value&&e.value(t.value),void 0!==t.total&&e.total(t.total),void 0!==t.innerRadius&&e.innerRadius(t.innerRadius),void 0!==t.outerRadius&&e.outerRadius(t.outerRadius),void 0!==t.phaseAngle&&e.phaseAngle(t.phaseAngle),void 0!==t.padAngle&&e.padAngle(t.padAngle),void 0!==t.padRadius&&e.padRadius(t.padRadius),void 0!==t.cornerRadius&&e.cornerRadius(t.cornerRadius),void 0!==t.labelRadius&&e.labelRadius(t.labelRadius),void 0!==t.sliceColor&&e.sliceColor(t.sliceColor),void 0!==t.tickAlign&&e.tickAlign(t.tickAlign),void 0!==t.tickRadius&&e.tickRadius(t.tickRadius),void 0!==t.tickLength&&e.tickLength(t.tickLength),void 0!==t.tickWidth&&e.tickWidth(t.tickWidth),void 0!==t.tickPadding&&e.tickPadding(t.tickPadding),void 0!==t.tickColor&&e.tickColor(t.tickColor),void 0!==t.font&&e.font(t.font),void 0!==t.textColor&&e.textColor(t.textColor),void 0!==t.label&&e.label(t.label),void 0!==t.legend&&e.legend(t.legend),e}throw new TypeError(""+t)},_([n.MemberAnimator(Number)],h.prototype,"value",void 0),_([n.MemberAnimator(i.Length,"inherit")],h.prototype,"innerRadius",void 0),_([n.MemberAnimator(i.Length,"inherit")],h.prototype,"outerRadius",void 0),_([n.MemberAnimator(e.Angle)],h.prototype,"phaseAngle",void 0),_([n.MemberAnimator(e.Angle,"inherit")],h.prototype,"padAngle",void 0),_([n.MemberAnimator(i.Length,"inherit")],h.prototype,"padRadius",void 0),_([n.MemberAnimator(i.Length,"inherit")],h.prototype,"cornerRadius",void 0),_([n.MemberAnimator(i.Length,"inherit")],h.prototype,"labelRadius",void 0),_([n.MemberAnimator(o.Color,"inherit")],h.prototype,"sliceColor",void 0),_([n.MemberAnimator(Number,"inherit")],h.prototype,"tickAlign",void 0),_([n.MemberAnimator(i.Length,"inherit")],h.prototype,"tickRadius",void 0),_([n.MemberAnimator(i.Length,"inherit")],h.prototype,"tickLength",void 0),_([n.MemberAnimator(i.Length,"inherit")],h.prototype,"tickWidth",void 0),_([n.MemberAnimator(i.Length,"inherit")],h.prototype,"tickPadding",void 0),_([n.MemberAnimator(o.Color,"inherit")],h.prototype,"tickColor",void 0),_([n.MemberAnimator(r.Font,"inherit")],h.prototype,"font",void 0),_([n.MemberAnimator(o.Color,"inherit")],h.prototype,"textColor",void 0),h}(n.GraphicView),P=function(t){function s(){var r=t.call(this)||this;return r.limit.setState(0),r.baseAngle.setState(e.Angle.rad(-Math.PI/2)),r.innerRadius.setState(i.Length.pct(3)),r.outerRadius.setState(i.Length.pct(25)),r.padAngle.setState(e.Angle.deg(2)),r.padRadius.setState(null),r.cornerRadius.setState(i.Length.zero()),r.labelRadius.setState(i.Length.pct(50)),r.sliceColor.setState(o.Color.black()),r.tickAlign.setState(.5),r.tickRadius.setState(i.Length.pct(30)),r.tickLength.setState(i.Length.pct(50)),r.tickWidth.setState(i.Length.px(1)),r.tickPadding.setState(i.Length.px(1)),r.tickColor.setState(o.Color.black()),r}return k(s,t),Object.defineProperty(s.prototype,"viewController",{get:function(){return this._viewController},enumerable:!0,configurable:!0}),s.prototype.title=function(t){return void 0===t?this.getChildView("title"):(null===t||t instanceof n.View||(t=a.TextRunView.fromAny(t)),this.setChildView("title",t),this)},s.prototype.addSlice=function(t){t=C.fromAny(t),this.appendChildView(t)},s.prototype.onAnimate=function(t){this.limit.onFrame(t),this.baseAngle.onFrame(t),this.innerRadius.onFrame(t),this.outerRadius.onFrame(t),this.padAngle.onFrame(t),this.padRadius.onFrame(t),this.cornerRadius.onFrame(t),this.labelRadius.onFrame(t),this.sliceColor.onFrame(t),this.tickAlign.onFrame(t),this.tickRadius.onFrame(t),this.tickLength.onFrame(t),this.tickWidth.onFrame(t),this.tickPadding.onFrame(t),this.tickColor.onFrame(t),this.font.onFrame(t),this.textColor.onFrame(t)},s.prototype.didAnimate=function(e){this.layoutPie(),t.prototype.didAnimate.call(this,e)},s.prototype.layoutPie=function(){for(var t=this._childViews,i=t.length,o=0,r=0;r<i;r+=1){if((l=t[r])instanceof C){var a=l.value.value;isFinite(a)&&(o+=a)}}o=Math.max(o,this.limit.value);var s=this.baseAngle.value;for(r=0;r<i;r+=1){var l;if((l=t[r])instanceof C){l.total(o).phaseAngle(s);a=l.value.value;isFinite(a)&&(s=s.plus(e.Angle.rad(2*Math.PI*a/(o||1))))}}var h=this.title();n.TypesetView.is(h)&&(h.textAlign("center"),h.textBaseline("middle"))},s.fromAny=function(t){if(t instanceof s)return t;if("object"==typeof t&&t){var e=new s;void 0!==t.key&&e.key(t.key),void 0!==t.limit&&e.limit(t.limit),void 0!==t.baseAngle&&e.baseAngle(t.baseAngle),void 0!==t.innerRadius&&e.innerRadius(t.innerRadius),void 0!==t.outerRadius&&e.outerRadius(t.outerRadius),void 0!==t.padAngle&&e.padAngle(t.padAngle),void 0!==t.padRadius&&e.padRadius(t.padRadius),void 0!==t.cornerRadius&&e.cornerRadius(t.cornerRadius),void 0!==t.labelRadius&&e.labelRadius(t.labelRadius),void 0!==t.sliceColor&&e.sliceColor(t.sliceColor),void 0!==t.tickAlign&&e.tickAlign(t.tickAlign),void 0!==t.tickRadius&&e.tickRadius(t.tickRadius),void 0!==t.tickLength&&e.tickLength(t.tickLength),void 0!==t.tickWidth&&e.tickWidth(t.tickWidth),void 0!==t.tickPadding&&e.tickPadding(t.tickPadding),void 0!==t.tickColor&&e.tickColor(t.tickColor),void 0!==t.font&&e.font(t.font),void 0!==t.textColor&&e.textColor(t.textColor),void 0!==t.title&&e.title(t.title);var i=t.slices;if(i)for(var o=0,r=i.length;o<r;o+=1)e.addSlice(i[o]);return e}throw new TypeError(""+t)},_([n.MemberAnimator(Number)],s.prototype,"limit",void 0),_([n.MemberAnimator(e.Angle)],s.prototype,"baseAngle",void 0),_([n.MemberAnimator(i.Length)],s.prototype,"innerRadius",void 0),_([n.MemberAnimator(i.Length)],s.prototype,"outerRadius",void 0),_([n.MemberAnimator(e.Angle)],s.prototype,"padAngle",void 0),_([n.MemberAnimator(i.Length)],s.prototype,"padRadius",void 0),_([n.MemberAnimator(i.Length)],s.prototype,"cornerRadius",void 0),_([n.MemberAnimator(i.Length)],s.prototype,"labelRadius",void 0),_([n.MemberAnimator(o.Color)],s.prototype,"sliceColor",void 0),_([n.MemberAnimator(Number)],s.prototype,"tickAlign",void 0),_([n.MemberAnimator(i.Length)],s.prototype,"tickRadius",void 0),_([n.MemberAnimator(i.Length)],s.prototype,"tickLength",void 0),_([n.MemberAnimator(i.Length)],s.prototype,"tickWidth",void 0),_([n.MemberAnimator(i.Length)],s.prototype,"tickPadding",void 0),_([n.MemberAnimator(o.Color)],s.prototype,"tickColor",void 0),_([n.MemberAnimator(r.Font,"inherit")],s.prototype,"font",void 0),_([n.MemberAnimator(o.Color,"inherit")],s.prototype,"textColor",void 0),s}(n.GraphicView);(A=t.TickState||(t.TickState={}))[A.Excluded=0]="Excluded",A[A.Entering=1]="Entering",A[A.Included=2]="Included",A[A.Leaving=3]="Leaving";var R=function(t){function e(i){var o=t.call(this)||this;return o._value=i,o._coord=0,o._coord0=NaN,o._state=0,o._preserve=!0,o.opacity.setState(1),o.opacity.interpolate=e.interpolateOpacity,o}return k(e,t),Object.defineProperty(e.prototype,"viewController",{get:function(){return this._viewController},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"value",{get:function(){return this._value},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"coord",{get:function(){return this._coord},enumerable:!0,configurable:!0}),e.prototype.setCoord=function(t){this._coord=t},e.prototype.tickLabel=function(t){return void 0===t?this.getChildView("tickLabel"):(null===t||t instanceof n.View||(t=a.TextRunView.fromAny(t)),this.setChildView("tickLabel",t),this)},e.prototype.preserve=function(t){return void 0===t?this._preserve:(this._preserve=t,this)},e.prototype.fadeIn=function(t){0!==this._state&&3!==this._state||(this.opacity.setState(1,t),this._state=1)},e.prototype.fadeOut=function(t){1!==this._state&&2!==this._state||(this.opacity.setState(0,t),this._state=3)},e.prototype.onAnimate=function(t){this.opacity.onFrame(t),this.tickMarkColor.onFrame(t),this.tickMarkWidth.onFrame(t),this.tickMarkLength.onFrame(t),this.tickLabelPadding.onFrame(t),this.gridLineColor.onFrame(t),this.gridLineWidth.onFrame(t),this.font.onFrame(t),this.textColor.onFrame(t);var e=this.tickLabel();n.RenderView.is(e)&&this.layoutTickLabel(e,this._bounds,this._anchor)},e.prototype.willRender=function(e){t.prototype.willRender.call(this,e),e.save(),e.globalAlpha=this.opacity.value},e.prototype.onRender=function(t){var e=this._bounds,i=this._anchor;this.renderTick(t,e,i)},e.prototype.didRender=function(e){e.restore(),t.prototype.didRender.call(this,e)},e.prototype.setChildViewBounds=function(e,i){"tickLabel"===e.key()?this.layoutTickLabel(e,i,this._anchor):t.prototype.setChildViewBounds.call(this,e,i)},e.prototype.setChildViewAnchor=function(e,i){"tickLabel"===e.key()?this.layoutTickLabel(e,this._bounds,i):t.prototype.setChildViewAnchor.call(this,e,i)},e.top=function(t){return new e.Top(t)},e.right=function(t){return new e.Right(t)},e.bottom=function(t){return new e.Bottom(t)},e.left=function(t){return new e.Left(t)},e.from=function(t,i){if("top"===t)return e.top(i);if("right"===t)return e.right(i);if("bottom"===t)return e.bottom(i);if("left"===t)return e.left(i);throw new TypeError(t)},e.fromAny=function(t,i){if(t instanceof e)return t;if(t&&"object"==typeof t){if(t.orientation&&(i=t.orientation),!i)throw new TypeError;var o=e.from(i,t.value);return void 0!==t.key&&o.key(t.key),void 0!==t.tickMarkColor&&o.tickMarkColor(t.tickMarkColor),void 0!==t.tickMarkWidth&&o.tickMarkWidth(t.tickMarkWidth),void 0!==t.tickMarkLength&&o.tickMarkLength(t.tickMarkLength),void 0!==t.tickLabelPadding&&o.tickLabelPadding(t.tickLabelPadding),void 0!==t.gridLineColor&&o.gridLineColor(t.gridLineColor),void 0!==t.gridLineWidth&&o.gridLineWidth(t.gridLineWidth),void 0!==t.font&&o.font(t.font),void 0!==t.textColor&&o.textColor(t.textColor),void 0!==t.tickLabel&&o.tickLabel(t.tickLabel),o}throw new TypeError(""+t)},e.interpolateOpacity=function(t){var e=this._view,i=e._coord;isNaN(e._coord0)&&(e._coord0=i);var o=e._parentView._tickSpacing/2,r=Math.min(Math.abs(i-e._coord0)/o,1),n=this._interpolator.interpolate(Math.max(t,r));return 1!==t&&1!==r||(this._tweenState=3),0===n&&3===e._state?(e._state=0,e._coord0=NaN,e.remove()):1===n&&1===e._state&&(e._state=2,e._coord0=NaN),n},_([n.MemberAnimator(Number)],e.prototype,"opacity",void 0),_([n.MemberAnimator(o.Color,"inherit")],e.prototype,"tickMarkColor",void 0),_([n.MemberAnimator(Number,"inherit")],e.prototype,"tickMarkWidth",void 0),_([n.MemberAnimator(Number,"inherit")],e.prototype,"tickMarkLength",void 0),_([n.MemberAnimator(Number,"inherit")],e.prototype,"tickLabelPadding",void 0),_([n.MemberAnimator(o.Color,"inherit")],e.prototype,"gridLineColor",void 0),_([n.MemberAnimator(Number,"inherit")],e.prototype,"gridLineWidth",void 0),_([n.MemberAnimator(r.Font,"inherit")],e.prototype,"font",void 0),_([n.MemberAnimator(o.Color,"inherit")],e.prototype,"textColor",void 0),e}(n.GraphicView),T=function(t){function e(e){return t.call(this,e)||this}return k(e,t),Object.defineProperty(e.prototype,"orientation",{get:function(){return"top"},enumerable:!0,configurable:!0}),e.prototype.layoutTickLabel=function(t,e,i){var o=Math.round(i.x),r=Math.round(i.y)-this.tickMarkLength.value-this.tickLabelPadding.value,a=new s.PointR2(o,r);t.setAnchor(a),n.TypesetView.is(t)&&(t.textAlign("center"),t.textBaseline("bottom"))},e.prototype.renderTick=function(t,e,i){var o=Math.round(i.x),r=Math.round(i.y),n=r-this.tickMarkLength.value;t.beginPath(),t.strokeStyle=this.tickMarkColor.value.toString(),t.lineWidth=this.tickMarkWidth.value,t.moveTo(o,r),t.lineTo(o,n),t.stroke();var a=this.gridLineWidth.value;a&&e.xMin<o&&o<e.xMax&&(t.beginPath(),t.strokeStyle=this.gridLineColor.value.toString(),t.lineWidth=a,t.moveTo(o,r),t.lineTo(o,e.yMax),t.stroke())},e}(R);R.Top=T;var L=function(t){function e(e){return t.call(this,e)||this}return k(e,t),Object.defineProperty(e.prototype,"orientation",{get:function(){return"right"},enumerable:!0,configurable:!0}),e.prototype.layoutTickLabel=function(t,e,i){var o=Math.round(i.x),r=Math.round(i.y),a=o+this.tickMarkLength.value+this.tickLabelPadding.value,l=new s.PointR2(a,r);t.setAnchor(l),n.TypesetView.is(t)&&(t.textAlign("left"),t.textBaseline("middle"))},e.prototype.renderTick=function(t,e,i){var o=Math.round(i.x),r=Math.round(i.y),n=o+this.tickMarkLength.value;t.beginPath(),t.strokeStyle=this.tickMarkColor.value.toString(),t.lineWidth=this.tickMarkWidth.value,t.moveTo(o,r),t.lineTo(n,r),t.stroke();var a=this.gridLineWidth.value;a&&e.yMin<r&&r<e.yMax&&(t.beginPath(),t.strokeStyle=this.gridLineColor.value.toString(),t.lineWidth=a,t.moveTo(o,r),t.lineTo(e.xMin,r),t.stroke())},e}(R);R.Right=L;var V=function(t){function e(e){return t.call(this,e)||this}return k(e,t),Object.defineProperty(e.prototype,"orientation",{get:function(){return"bottom"},enumerable:!0,configurable:!0}),e.prototype.layoutTickLabel=function(t,e,i){var o=Math.round(i.x),r=Math.round(i.y)+this.tickMarkLength.value+this.tickLabelPadding.value,a=new s.PointR2(o,r);t.setAnchor(a),n.TypesetView.is(t)&&(t.textAlign("center"),t.textBaseline("top"))},e.prototype.renderTick=function(t,e,i){var o=Math.round(i.x),r=Math.round(i.y),n=r+this.tickMarkLength.value;t.beginPath(),t.strokeStyle=this.tickMarkColor.value.toString(),t.lineWidth=this.tickMarkWidth.value,t.moveTo(o,r),t.lineTo(o,n),t.stroke();var a=this.gridLineWidth.value;a&&e.xMin<o&&o<e.xMax&&(t.beginPath(),t.strokeStyle=this.gridLineColor.value.toString(),t.lineWidth=a,t.moveTo(o,r),t.lineTo(o,e.yMin),t.stroke())},e}(R);R.Bottom=V;var S=function(t){function e(e){return t.call(this,e)||this}return k(e,t),Object.defineProperty(e.prototype,"orientation",{get:function(){return"left"},enumerable:!0,configurable:!0}),e.prototype.layoutTickLabel=function(t,e,i){var o=Math.round(i.x),r=Math.round(i.y),a=o-this.tickMarkLength.value-this.tickLabelPadding.value,l=new s.PointR2(a,r);t.setAnchor(l),n.TypesetView.is(t)&&(t.textAlign("right"),t.textBaseline("middle"))},e.prototype.renderTick=function(t,e,i){var o=Math.round(i.x),r=Math.round(i.y),n=o-this.tickMarkLength.value;t.beginPath(),t.strokeStyle=this.tickMarkColor.value.toString(),t.lineWidth=this.tickMarkWidth.value,t.moveTo(o,r),t.lineTo(n,r),t.stroke();var a=this.gridLineWidth.value;a&&e.yMin<r&&r<e.yMax&&(t.beginPath(),t.strokeStyle=this.gridLineColor.value.toString(),t.lineWidth=a,t.moveTo(o,r),t.lineTo(e.xMax,r),t.stroke())},e}(R);R.Left=S;var D=Math.sqrt(50),j=Math.sqrt(10),G=Math.sqrt(2),F=(new h.BTree).set(1e3,u.TimeInterval.second()).set(5e3,u.TimeInterval.second(5)).set(15e3,u.TimeInterval.second(15)).set(3e4,u.TimeInterval.second(30)).set(6e4,u.TimeInterval.minute(1)).set(3e5,u.TimeInterval.minute(5)).set(9e5,u.TimeInterval.minute(15)).set(18e5,u.TimeInterval.minute(30)).set(36e5,u.TimeInterval.hour()).set(108e5,u.TimeInterval.hour(3)).set(216e5,u.TimeInterval.hour(6)).set(432e5,u.TimeInterval.hour(12)).set(864e5,u.TimeInterval.day()).set(1728e5,u.TimeInterval.day(2)).set(6048e5,u.TimeInterval.week()).set(2592e6,u.TimeInterval.month()).set(7776e6,u.TimeInterval.month(3)).set(31536e6,u.TimeInterval.year()),W=u.DateTimeFormat.pattern(".%L"),B=u.DateTimeFormat.pattern(":%S"),O=u.DateTimeFormat.pattern("%I:%M"),I=u.DateTimeFormat.pattern("%I %p"),N=u.DateTimeFormat.pattern("%a %d"),E=u.DateTimeFormat.pattern("%b %d"),z=u.DateTimeFormat.pattern("%B"),Z=u.DateTimeFormat.pattern("%Y"),q=function(){function t(){}return t.prototype.format=function(t){return""+t},t.fromScale=function(t,e){if(void 0===e&&(e=10),t instanceof d.TimeScale){var i=t.domain();return new U(i[0],i[1],e)}i=t.domain();return new K(i[0],i[1],e)},t.step=function(t,e){var i=Math.abs(t)/e,o=Math.pow(10,Math.floor(Math.log(i)/Math.LN10)),r=i/o;return r>=D?o*=10:r>=j?o*=5:r>=G&&(o*=2),t<0?-o:o},t}(),K=function(t){function e(e,i,o){var r=t.call(this)||this;return r.x0=e,r.dx=i-r.x0,r.n=Math.max(0,o),r}return k(e,t),e.prototype.count=function(t){return void 0===t?this.n:(this.n=Math.max(0,t),this)},e.prototype.domain=function(t,e){return void 0===t?[this.x0,this.x0+this.dx]:void 0===e?(this.x0=t[0],this.dx=t[1]-this.x0,this):(this.x0=t,this.dx=e-this.x0,this)},e.prototype.generate=function(){var t,i;this.dx<0?t=(i=this.x0)+this.dx:i=(t=this.x0)+this.dx;var o,r=e.interval(i-t,this.n);if(0===r||!isFinite(r))return[];if(r>0){t=Math.ceil(t/r),i=Math.floor(i/r);var n=Math.ceil(i-t+1);o=new Array(n);for(var a=0;a<n;a+=1)o[a]=(t+a)*r}else{t=Math.floor(t*r),i=Math.ceil(i*r);n=Math.ceil(t-i+1);o=new Array(n);for(a=0;a<n;a+=1)o[a]=(t-a)/r}return this.dx<0&&o.reverse(),o},e.interval=function(t,e){void 0===e&&(e=10);var i=t/e,o=Math.floor(Math.log(i)/Math.LN10),r=Math.pow(10,o),n=i/r,a=n>=D?10:n>=j?5:n>=G?2:1;return o>=0?r*a:-Math.pow(10,-o)/a},e}(q),U=function(t){function e(e,i,o,r){var n=t.call(this)||this;return e=u.DateTime.fromAny(e),i=u.DateTime.fromAny(i),n.t0=e.time(),n.dt=i.time()-n.t0,n.zone=r||e.zone(),n.n=Math.max(0,o),n}return k(e,t),e.prototype.count=function(t){return void 0===t?this.n:(this.n=Math.max(0,t),this)},e.prototype.domain=function(t,e){return void 0===t?[new u.DateTime(this.t0,this.zone),new u.DateTime(this.t0+this.dt,this.zone)]:(void 0===e?(e=t[1],t=t[0]):t=t,t=u.DateTime.fromAny(t),e=u.DateTime.fromAny(e),this.t0=t.time(),this.dt=e.time()-this.t0,this)},e.prototype.generate=function(t){var i,o;this.dt<0?i=(o=this.t0)+this.dt:o=(i=this.t0)+this.dt,void 0===t&&(t=this.n);var r=(t=e.interval(o-i,t)).range(new u.DateTime(i,this.zone),new u.DateTime(o+1,this.zone));return this.dt<0&&r.reverse(),r},e.prototype.format=function(t){return u.TimeInterval.second().floor(t)<t?W.format(t):u.TimeInterval.minute().floor(t)<t?B.format(t):u.TimeInterval.hour().floor(t)<t?O.format(t):u.TimeInterval.day().floor(t)<t?I.format(t):u.TimeInterval.month().floor(t)<t?u.TimeInterval.week().floor(t)<t?N.format(t):E.format(t):u.TimeInterval.year().floor(t)<t?z.format(t):Z.format(t)},e.interval=function(t,e){if(void 0===e&&(e=10),"number"==typeof e){var i=Math.abs(t)/e,o=F.nextKey(i);if(void 0===o){var r=q.step(t/31536e6,e);e=u.TimeInterval.year(r)}else if(o>1e3)e=i/F.previousKey(i)<o/i?F.previousValue(i):F.nextValue(i);else{r=Math.max(1,q.step(t,e));e=u.TimeInterval.millisecond(r)}}return e},e}(q),Y=function(t){function e(e){var i=t.call(this)||this;return i._ticks=new h.BTree,i._tickGenerator=q.fromScale(e),i._tickSpacing=80,i._tickTransition=p.Transition.duration(200),i.scale.setState(e),i}return k(e,t),Object.defineProperty(e.prototype,"viewController",{get:function(){return this._viewController},enumerable:!0,configurable:!0}),e.prototype.getTick=function(t){return this._ticks.get(t)},e.prototype.insertTick=function(t){t=R.fromAny(t,this.orientation),this.insertChildView(t,this._ticks.nextValue(t.value)||null)},e.prototype.removeTick=function(t){var e=this._ticks.get(t);e&&(e.remove(),this._ticks.delete(t))},e.prototype.domain=function(t,e,i){var o=this.scale.value;return void 0===t?o.domain():((o=o.domain(t,e)).equals(this.scale.state)||this.scale.setState(o,i),this)},e.prototype.range=function(t,e,i){var o=this.scale.value;return void 0===t?o.range():((o=o.range(t,e)).equals(this.scale.state)||this.scale.setState(o,i),this)},e.prototype.tickGenerator=function(t){return void 0===t?this._tickGenerator:(this._tickGenerator=t,this)},e.prototype.tickSpacing=function(t){return void 0===t?this._tickSpacing:(this._tickSpacing=t,this)},e.prototype.tickTransition=function(t){return void 0===t?this._tickTransition:(t=null!==t?p.Transition.fromAny(t):null,this._tickTransition=t,this)},e.prototype.onAnimate=function(t){this.scale.onFrame(t),this.domainColor.onFrame(t),this.domainWidth.onFrame(t),this.domainSerif.onFrame(t),this.tickMarkColor.onFrame(t),this.tickMarkWidth.onFrame(t),this.tickMarkLength.onFrame(t),this.tickLabelPadding.onFrame(t),this.gridLineColor.onFrame(t),this.gridLineWidth.onFrame(t),this.font.onFrame(t),this.textColor.onFrame(t),this._tickGenerator&&(this.generateTicks(this._tickGenerator),this.layoutTicks(this._bounds,this._anchor))},e.prototype.generateTicks=function(t){var e=this.scale.value;if(this._tickSpacing){var i=e.range(),o=i[0],r=i[1],n=Math.abs(r-o),a=Math.max(1,Math.floor(n/this._tickSpacing));t.count(a)}t.domain(e.domain());var s=this._ticks.clone(),l=t.generate(),h=0;for(a=l.length;h<a;h+=1){var u=l[h],d=s.get(u);if(d)s.delete(u),d.fadeIn(this._tickTransition||void 0);else{var c=this.createTickView(u);c&&(this.insertTick(c),c.opacity(0),c.fadeIn(this._tickTransition||void 0))}}s.forEach(function(t,e){e._preserve||e.fadeOut(this._tickTransition||void 0)},this)},e.prototype.createTickView=function(t){var e,i=this._viewController;if(i&&(e=i.createTickView(t)),void 0===e&&(e=R.from(this.orientation,t)),e){var o=this.createTickLabel(t,e);null!==o&&(e.tickLabel(o),e._preserve=!1)}return e},e.prototype.createTickLabel=function(t,e){var i,o=this._viewController;return o&&(i=o.createTickLabel(t,e)),void 0===i&&(i=this._tickGenerator?this._tickGenerator.format(t):t.toString()),"string"==typeof i&&(i=this.formatTickLabel(i,e)),i},e.prototype.formatTickLabel=function(t,e){var i=this._viewController;return i?i.formatTickLabel(t,e):t},e.prototype.didRender=function(t){t.save();var e=this._bounds,i=this._anchor;this.renderDomain(t,e,i),t.restore()},e.prototype.layoutTicks=function(t,e){for(var i=this._childViews,o=0,r=i.length;o<r;o+=1){var n=i[o];n instanceof R&&this.layoutTick(n,t,e)}},e.prototype.onInsertChildView=function(t){t instanceof R&&this._ticks.set(t.value,t)},e.prototype.onRemoveChildView=function(t){t instanceof R&&this._ticks.delete(t.value)},e.prototype.setChildViewBounds=function(e,i){e instanceof R?this.layoutTick(e,i,this._anchor):t.prototype.setChildViewBounds.call(this,e,i)},e.prototype.setChildViewAnchor=function(e,i){e instanceof R?this.layoutTick(e,this._bounds,i):t.prototype.setChildViewAnchor.call(this,e,i)},e.top=function(t){return t=e.scale(t),new e.Top(t)},e.right=function(t){return t=e.scale(t),new e.Right(t)},e.bottom=function(t){return t=e.scale(t),new e.Bottom(t)},e.left=function(t){return t=e.scale(t),new e.Left(t)},e.from=function(t,i){if("top"===t)return e.top(i);if("right"===t)return e.right(i);if("bottom"===t)return e.bottom(i);if("left"===t)return e.left(i);throw new TypeError(t)},e.fromAny=function(t){if(t instanceof e)return t;if("object"==typeof t&&t){var i=e.from(t.orientation,t.scale);void 0!==t.key&&i.key(t.key);var o=t.ticks,r=t.tickGenerator?t.tickGenerator:o?null:void 0;if(void 0!==r&&i.tickGenerator(r),o)for(var n=0,a=o.length;n<a;n+=1)i.insertTick(o[n]);return void 0!==t.tickSpacing&&i.tickSpacing(t.tickSpacing),void 0!==t.tickTransition&&i.tickTransition(t.tickTransition),void 0!==t.domainColor&&i.domainColor(t.domainColor),void 0!==t.domainWidth&&i.domainWidth(t.domainWidth),void 0!==t.domainSerif&&i.domainSerif(t.domainSerif),void 0!==t.tickMarkColor&&i.tickMarkColor(t.tickMarkColor),void 0!==t.tickMarkWidth&&i.tickMarkWidth(t.tickMarkWidth),void 0!==t.tickMarkLength&&i.tickMarkLength(t.tickMarkLength),void 0!==t.tickLabelPadding&&i.tickLabelPadding(t.tickLabelPadding),void 0!==t.gridLineColor&&i.gridLineColor(t.gridLineColor),void 0!==t.gridLineWidth&&i.gridLineWidth(t.gridLineWidth),void 0!==t.font&&i.font(t.font),void 0!==t.textColor&&i.textColor(t.textColor),i}throw new TypeError(""+t)},e.scale=function(t){if(t instanceof d.ContinuousScale)return t;if("string"==typeof t){if("linear"===t)return new d.LinearScale(0,1,new c.NumberInterpolator(0,0));if("time"===t){var e=u.DateTime.current(),i=e.day(e.day()-1);return new d.TimeScale(i,e,new c.NumberInterpolator(0,0))}var o=t.split("..."),r=m.StyleValue.parse(o[0]),n=m.StyleValue.parse(o[1]);if("number"==typeof r&&"number"==typeof n)return new d.LinearScale(r,n,new c.NumberInterpolator(0,0));if(r instanceof u.DateTime&&n instanceof u.DateTime)return new d.TimeScale(r,n,new c.NumberInterpolator(0,0))}throw new TypeError(t)},_([n.MemberAnimator(Object)],e.prototype,"scale",void 0),_([n.MemberAnimator(o.Color,"inherit")],e.prototype,"domainColor",void 0),_([n.MemberAnimator(Number,"inherit")],e.prototype,"domainWidth",void 0),_([n.MemberAnimator(Number,"inherit")],e.prototype,"domainSerif",void 0),_([n.MemberAnimator(o.Color,"inherit")],e.prototype,"tickMarkColor",void 0),_([n.MemberAnimator(Number,"inherit")],e.prototype,"tickMarkWidth",void 0),_([n.MemberAnimator(Number,"inherit")],e.prototype,"tickMarkLength",void 0),_([n.MemberAnimator(Number,"inherit")],e.prototype,"tickLabelPadding",void 0),_([n.MemberAnimator(o.Color,"inherit")],e.prototype,"gridLineColor",void 0),_([n.MemberAnimator(Number,"inherit")],e.prototype,"gridLineWidth",void 0),_([n.MemberAnimator(r.Font,"inherit")],e.prototype,"font",void 0),_([n.MemberAnimator(o.Color,"inherit")],e.prototype,"textColor",void 0),e}(n.GraphicView),H=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return k(e,t),Object.defineProperty(e.prototype,"orientation",{get:function(){var t=this._view;return t?t.orientation:void 0},enumerable:!0,configurable:!0}),e.prototype.createTickView=function(t){},e.prototype.createTickLabel=function(t,e){},e.prototype.formatTickLabel=function(t,e){return t},e}(n.GraphicViewController),J=function(t){function e(e){return t.call(this,e)||this}return k(e,t),Object.defineProperty(e.prototype,"orientation",{get:function(){return"top"},enumerable:!0,configurable:!0}),e.prototype.renderDomain=function(t,e,i){var o=i.x,r=i.y,n=this.scale.value.range(),a=n[0],s=n[1],l=this.domainSerif.value;t.beginPath(),t.strokeStyle=this.domainColor.value.toString(),t.lineWidth=this.domainWidth.value,l?(t.moveTo(o+a,r-l),t.lineTo(o+a,r),t.lineTo(o+s,r),t.lineTo(o+s,r-l)):(t.moveTo(o+a,r),t.lineTo(o+s,r)),t.stroke()},e.prototype.layoutTick=function(t,e,i){var o=this.scale.value.scale(t.value),r=i.x+o,n=i.y,a=new s.PointR2(r,n);t.setBounds(e),t.setAnchor(a),t.setCoord(o)},e}(Y);Y.Top=J;var Q=function(t){function e(e){return t.call(this,e)||this}return k(e,t),Object.defineProperty(e.prototype,"orientation",{get:function(){return"right"},enumerable:!0,configurable:!0}),e.prototype.renderDomain=function(t,e,i){var o=i.x,r=i.y,n=this.scale.value.range(),a=n[0],s=n[1],l=this.domainSerif.value;t.beginPath(),t.strokeStyle=this.domainColor.value.toString(),t.lineWidth=this.domainWidth.value,l?(t.moveTo(o+l,r+a),t.lineTo(o,r+a),t.lineTo(o,r+s),t.lineTo(o+l,r+s)):(t.moveTo(o,r+a),t.lineTo(o,r+s)),t.stroke()},e.prototype.layoutTick=function(t,e,i){var o=this.scale.value.scale(t.value),r=i.x,n=i.y+o,a=new s.PointR2(r,n);t.setBounds(e),t.setAnchor(a),t.setCoord(o)},e}(Y);Y.Right=Q;var X=function(t){function e(e){return t.call(this,e)||this}return k(e,t),Object.defineProperty(e.prototype,"orientation",{get:function(){return"bottom"},enumerable:!0,configurable:!0}),e.prototype.renderDomain=function(t,e,i){var o=i.x,r=i.y,n=this.scale.value.range(),a=n[0],s=n[1],l=this.domainSerif.value;t.beginPath(),t.strokeStyle=this.domainColor.value.toString(),t.lineWidth=this.domainWidth.value,l?(t.moveTo(o+a,r+l),t.lineTo(o+a,r),t.lineTo(o+s,r),t.lineTo(o+s,r+l)):(t.moveTo(o+a,r),t.lineTo(o+s,r)),t.stroke()},e.prototype.layoutTick=function(t,e,i){var o=this.scale.value.scale(t.value),r=i.x+o,n=i.y,a=new s.PointR2(r,n);t.setBounds(e),t.setAnchor(a),t.setCoord(o)},e}(Y);Y.Bottom=X;var $=function(t){function e(e){return t.call(this,e)||this}return k(e,t),Object.defineProperty(e.prototype,"orientation",{get:function(){return"left"},enumerable:!0,configurable:!0}),e.prototype.renderDomain=function(t,e,i){var o=i.x,r=i.y,n=this.scale.value.range(),a=n[0],s=n[1],l=this.domainSerif.value;t.beginPath(),t.strokeStyle=this.domainColor.value.toString(),t.lineWidth=this.domainWidth.value,l?(t.moveTo(o-l,r+a),t.lineTo(o,r+a),t.lineTo(o,r+s),t.lineTo(o-l,r+s)):(t.moveTo(o,r+a),t.lineTo(o,r+s)),t.stroke()},e.prototype.layoutTick=function(t,e,i){var o=this.scale.value.scale(t.value),r=i.x,n=i.y+o,a=new s.PointR2(r,n);t.setBounds(e),t.setAnchor(a),t.setCoord(o)},e}(Y);Y.Left=$;var tt=function(t){function e(e,i,o){var r=t.call(this,o)||this;return r.x.setState(e),r.y.setState(i),r._y2Coord=null,r._hitRadius=5,r._category=null,r._labelPlacement="auto",r}return k(e,t),Object.defineProperty(e.prototype,"viewController",{get:function(){return this._viewController},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"xCoord",{get:function(){return this._anchor.x},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"yCoord",{get:function(){return this._anchor.y},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"y2Coord",{get:function(){return this._y2Coord},enumerable:!0,configurable:!0}),e.prototype.hitRadius=function(t){return void 0===t?this._hitRadius:(this._hitRadius=t,this)},e.prototype.category=function(t){return void 0===t?this._category:(this._category=t,this)},e.prototype.label=function(t){return void 0===t?this.getChildView("label"):(null===t||t instanceof n.View||(t=a.TextRunView.fromAny(t)),this.setChildView("label",t),this)},e.prototype.labelPlacement=function(t){return void 0===t?this._labelPlacement:(this._labelPlacement=t,this)},e.prototype.isGradientStop=function(){return!!this.color.value||"number"==typeof this.opacity.value},e.prototype.onAnimate=function(t){this.x.onFrame(t),this.y.onFrame(t),this.y2.onFrame(t),this.r.onFrame(t),this.color.onFrame(t),this.opacity.onFrame(t),this.labelPadding.onFrame(t),this.font.onFrame(t),this.textColor.onFrame(t);var e=this.label();n.RenderView.is(e)&&this.layoutLabel(e,this._bounds,this._anchor)},e.prototype.layoutLabel=function(t,e,i){var o=this._labelPlacement;if("above"!==o&&"below"!==o){var r=this._category;o="increasing"===r||"maxima"===r?"above":"decreasing"===r||"minima"===r?"below":"above"}var a=this.labelPadding.value.pxValue(Math.min(e.width,e.height)),l=i.x,h=i.y;"above"===o?h-=a:"below"===o&&(h+=a);var u=new s.PointR2(l,h);t.setAnchor(u),n.TypesetView.is(t)&&(t.textAlign("center"),t.textBaseline("bottom"))},e.prototype.hitTest=function(e,i,o){var r=t.prototype.hitTest.call(this,e,i,o);if(null===r){var n=this._bounds,a=this._anchor;r=this.hitTestDatum(e,i,o,n,a)}return r},e.prototype.hitTestDatum=function(t,e,i,o,r){var n=this._hitRadius,a=this.r.value;if(a){var s=this.bounds,l=Math.min(s.width,s.height);n=Math.max(n,a.pxValue(l))}var h=r.x-t,u=r.y-e;return h*h+u*u<n*n?this:null},e.fromAny=function(t){if(t instanceof e)return t;if("object"==typeof t&&t){var i=new e(t.x,t.y,t.key);return void 0!==t.y2&&i.y2(t.y2),void 0!==t.r&&i.r(t.r),void 0!==t.hitRadius&&i.hitRadius(t.hitRadius),void 0!==t.category&&i.category(t.category),void 0!==t.color&&i.color(t.color),void 0!==t.opacity&&i.opacity(t.opacity),void 0!==t.labelPadding&&i.labelPadding(t.labelPadding),void 0!==t.labelPlacement&&i.labelPlacement(t.labelPlacement),void 0!==t.font&&i.font(t.font),void 0!==t.textColor&&i.textColor(t.textColor),void 0!==t.label&&i.label(t.label),i}throw new TypeError(""+t)},_([n.MemberAnimator(Object)],e.prototype,"x",void 0),_([n.MemberAnimator(Object)],e.prototype,"y",void 0),_([n.MemberAnimator(Object)],e.prototype,"y2",void 0),_([n.MemberAnimator(i.Length)],e.prototype,"r",void 0),_([n.MemberAnimator(o.Color)],e.prototype,"color",void 0),_([n.MemberAnimator(Number)],e.prototype,"opacity",void 0),_([n.MemberAnimator(i.Length)],e.prototype,"labelPadding",void 0),_([n.MemberAnimator(r.Font,"inherit")],e.prototype,"font",void 0),_([n.MemberAnimator(o.Color,"inherit")],e.prototype,"textColor",void 0),e}(n.GraphicView),et=function(t){function e(){var e=t.call(this)||this;return e._xAxis=null,e._yAxis=null,e._xDomain=[null,null],e._xRange=[1/0,-1/0],e._yDomain=[null,null],e._yRange=[1/0,-1/0],e}return k(e,t),Object.defineProperty(e.prototype,"viewController",{get:function(){return this._viewController},enumerable:!0,configurable:!0}),e.prototype.xAxis=function(t){return void 0===t?this._xAxis:(this._xAxis=t,this)},e.prototype.yAxis=function(t){return void 0===t?this._yAxis:(this._yAxis=t,this)},e.prototype.xDomain=function(){return this._xDomain},e.prototype.xRange=function(){return this._xRange},e.prototype.yDomain=function(){return this._yDomain},e.prototype.yRange=function(){return this._yRange},e.prototype.onAnimate=function(t){this.font.onFrame(t),this.textColor.onFrame(t)},e.prototype.didAnimate=function(e){this._xAxis&&this._yAxis&&this.layoutData(this._xAxis.scale.value,this._yAxis.scale.value,this._bounds,this._anchor),t.prototype.didAnimate.call(this,e)},e.prototype.layoutData=function(t,e,i,o){for(var r,n,a,l,h,u,d,c,p,m=this._childViews,v=0,y=m.length;v<y;v+=1){var g=m[v];if(g instanceof tt){var b=g.x.value,x=g.y.value,k=t.scale(b),_=e.scale(x),A=new s.PointR2(o.x+k,o.y+_);g.setAnchor(A),r?(f.Objects.compare(b,n)<0?n=b:f.Objects.compare(b,a)>0&&(a=b),k<l?l=k:k>h&&(h=k),f.Objects.compare(x,u)<0?u=x:f.Objects.compare(x,d)>0&&(d=x),_<c?c=_:_>p&&(p=_)):(n=b,a=b,l=k,h=k,u=x,d=x,c=_,p=_),r=g}}if(r){var w=!1;this._xDomain[0]!==n&&(this._xDomain[0]=n,w=!0),this._xDomain[1]!==a&&(this._xDomain[1]=a,w=!0),this._xRange[0]!==l&&(this._xRange[0]=l,w=!0),this._xRange[1]!==h&&(this._xRange[1]=h,w=!0),this._yDomain[0]!==u&&(this._yDomain[0]=u,w=!0),this._yDomain[1]!==d&&(this._yDomain[1]=d,w=!0),this._yRange[0]!==c&&(this._yRange[0]=c,w=!0),this._yRange[1]!==p&&(this._yRange[1]=p,w=!0),w&&this.animate()}},e.prototype.willRender=function(e){t.prototype.willRender.call(this,e),e.save(),this.clipPlot(e,this._bounds)},e.prototype.onRender=function(t){var e=this._bounds,i=this._anchor;this.renderPlot(t,e,i)},e.prototype.didRender=function(e){e.restore(),t.prototype.didRender.call(this,e)},e.prototype.clipPlot=function(t,e){t.beginPath(),t.rect(e.x,e.y,e.width,e.height),t.clip()},e.fromAny=function(t){if(t instanceof e)return t;if("string"==typeof t){if("bubble"===t)return new e.Bubble;if("line"===t)return new e.Line;if("area"===t)return new e.Area}else if("object"==typeof t&&t){var i=t.type;if("bubble"===i)return e.Bubble.fromAny(t);if("line"===i)return e.Line.fromAny(t);if("area"===i)return e.Area.fromAny(t)}throw new TypeError(""+t)},_([n.MemberAnimator(r.Font,"inherit")],e.prototype,"font",void 0),_([n.MemberAnimator(o.Color,"inherit")],e.prototype,"textColor",void 0),e}(n.GraphicView),it=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return k(e,t),Object.defineProperty(e.prototype,"type",{get:function(){var t=this._view;return t?t.type:void 0},enumerable:!0,configurable:!0}),e.prototype.xAxis=function(){var t=this._view;return t?t.xAxis():null},e.prototype.yAxis=function(){var t=this._view;return t?t.yAxis():null},e}(n.GraphicViewController),ot=function(t){function e(){var e=t.call(this)||this;return e.radius.setState(i.Length.px(5)),e.fill.setState(o.Color.black()),e}return k(e,t),Object.defineProperty(e.prototype,"viewController",{get:function(){return this._viewController},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"type",{get:function(){return"bubble"},enumerable:!0,configurable:!0}),e.prototype.getDatum=function(t){var e=this.getChildView(t);return e instanceof tt?e:void 0},e.prototype.insertDatum=function(t){return t=tt.fromAny(t),this.appendChildView(t),t},e.prototype.insertData=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var i=0,o=arguments.length;i<o;i+=1)this.insertDatum(arguments[i])},e.prototype.removeDatum=function(t){var e=this.getChildView(t);return e instanceof tt?(e.remove(),e):null},e.prototype.onAnimate=function(e){this.radius.onFrame(e),this.fill.onFrame(e),this.stroke.onFrame(e),this.strokeWidth.onFrame(e),t.prototype.onAnimate.call(this,e)},e.prototype.renderPlot=function(t,e,i){for(var o=Math.min(e.width,e.height),r=this.radius.value,n=this.fill.value,a=this.stroke.value,s=this.strokeWidth.value,l=this._childViews,h=0,u=l.length;h<u;h+=1){var d=l[h];if(d instanceof tt){t.beginPath();var c=d.r.value||r;t.arc(d.xCoord,d.yCoord,c.pxValue(o),0,2*Math.PI);var p=d.color.value||n;if(p){var m=d.opacity.value;"number"==typeof m&&(p=p.alpha(m)),t.fillStyle=p.toString(),t.fill()}a&&(s&&(t.lineWidth=s.pxValue(o)),t.strokeStyle=a.toString(),t.stroke())}}},e.fromAny=function(t){if(t instanceof e)return t;if(t instanceof et);else if("object"==typeof t&&t){t=t;var i=new e;void 0!==t.key&&i.key(t.key),void 0!==t.xAxis&&i.xAxis(t.xAxis),void 0!==t.yAxis&&i.yAxis(t.yAxis);var o=t.data;if(o)for(var r=0,n=o.length;r<n;r+=1)i.insertDatum(o[r]);return void 0!==t.radius&&i.radius(t.radius),void 0!==t.fill&&i.fill(t.fill),void 0!==t.stroke&&i.stroke(t.stroke),void 0!==t.strokeWidth&&i.strokeWidth(t.strokeWidth),void 0!==t.font&&i.font(t.font),void 0!==t.textColor&&i.textColor(t.textColor),i}throw new TypeError(""+t)},_([n.MemberAnimator(i.Length)],e.prototype,"radius",void 0),_([n.MemberAnimator(o.Color)],e.prototype,"fill",void 0),_([n.MemberAnimator(o.Color)],e.prototype,"stroke",void 0),_([n.MemberAnimator(i.Length)],e.prototype,"strokeWidth",void 0),e}(et);et.Bubble=ot;var rt=function(t){function e(){var e=t.call(this)||this;return e._data=new h.BTree,e._gradientStops=0,e}return k(e,t),Object.defineProperty(e.prototype,"viewController",{get:function(){return this._viewController},enumerable:!0,configurable:!0}),e.prototype.getDatum=function(t){return this._data.get(t)},e.prototype.insertDatum=function(t){return t=tt.fromAny(t),this.insertChildView(t,this._data.nextValue(t.x.state)||null),t},e.prototype.insertData=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var i=0,o=arguments.length;i<o;i+=1)this.insertDatum(arguments[i])},e.prototype.removeDatum=function(t){var e=this._data.get(t);return e?(e.remove(),this._data.delete(t),e):null},e.prototype.layoutData=function(t,e,i,o){var r,n,a,l,h,u,d,c,p,m,v,y,g=0;if(this._data.forEach(function(i,b){var x=b.y.value,k=t.scale(i),_=e.scale(x),A=new s.PointR2(o.x+k,o.y+_);b.setAnchor(A);var w=b.y2.value,M=null!=w?e.scale(w):null;if(b._y2Coord=null!==M?o.y+M:null,b.isGradientStop()&&(g+=1),n){var C=void 0;C=r?f.Objects.compare(a,l)<0&&f.Objects.compare(l,x)>0?"maxima":f.Objects.compare(a,l)>0&&f.Objects.compare(l,x)<0?"minima":f.Objects.compare(a,l)<0&&f.Objects.compare(l,x)<0?"increasing":f.Objects.compare(a,l)>0&&f.Objects.compare(l,x)>0?"decreasing":"flat":f.Objects.compare(l,x)<0?"increasing":f.Objects.compare(l,x)>0?"decreasing":"flat",n.category(C),f.Objects.compare(x,p)<0?p=x:f.Objects.compare(x,m)>0&&(m=x),null!=w&&(f.Objects.compare(w,p)<0?p=w:f.Objects.compare(w,m)>0&&(m=w)),_<v?v=_:_>y&&(y=_)}else h=i,d=k,p=x,m=x,v=_,y=_;r=n,n=b,a=l,l=x,u=i,c=k},this),n){var b=void 0;b=r?f.Objects.compare(a,l)<0?"increasing":f.Objects.compare(a,l)>0?"decreasing":"flat":"flat",n.category(b);var x=!1;this._xDomain[0]!==h&&(this._xDomain[0]=h,x=!0),this._xDomain[1]!==u&&(this._xDomain[1]=u,x=!0),this._xRange[0]!==d&&(this._xRange[0]=d,x=!0),this._xRange[1]!==c&&(this._xRange[1]=c,x=!0),this._yDomain[0]!==p&&(this._yDomain[0]=p,x=!0),this._yDomain[1]!==m&&(this._yDomain[1]=m,x=!0),this._yRange[0]!==v&&(this._yRange[0]=v,x=!0),this._yRange[1]!==y&&(this._yRange[1]=y,x=!0),x&&this.animate()}this._gradientStops=g},e.prototype.hitTest=function(e,i,o){var r=t.prototype.hitTest.call(this,e,i,o);if(null===r){o.save();var n=this.pixelRatio;e*=n,i*=n;var a=this._bounds,s=this._anchor;r=this.hitTestGraph(e,i,o,a,s),o.restore()}return r},e.prototype.onInsertChildView=function(e,i){t.prototype.onInsertChildView.call(this,e,i),e instanceof tt&&this._data.set(e.x.state,e)},e.prototype.onRemoveChildView=function(e){e instanceof tt&&this._data.delete(e.x.state),t.prototype.onRemoveChildView.call(this,e)},e.fromAny=function(t){return et.fromAny(t)},e}(et),nt=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return k(e,t),Object.defineProperty(e.prototype,"type",{get:function(){var t=this._view;return t?t.type:void 0},enumerable:!0,configurable:!0}),e}(it),at=function(t){function e(){var e=t.call(this)||this;return e.stroke.setState(o.Color.black()),e.strokeWidth.setState(i.Length.px(1)),e._hitWidth=5,e}return k(e,t),Object.defineProperty(e.prototype,"viewController",{get:function(){return this._viewController},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"type",{get:function(){return"line"},enumerable:!0,configurable:!0}),e.prototype.hitWidth=function(t){return void 0===t?this._hitWidth:(this._hitWidth=t,this)},e.prototype.onAnimate=function(e){this.stroke.onFrame(e),this.strokeWidth.onFrame(e),t.prototype.onAnimate.call(this,e)},e.prototype.renderPlot=function(t,e,i){var o,r,n,a,s=this._data,l=s.size,h=this.stroke.value,u=this.strokeWidth.value.pxValue(Math.min(e.width,e.height)),d=this._gradientStops;if(l>0){var c=s.firstValue(),p=s.lastValue();r=c.xCoord,n=p.xCoord,a=n-r,d&&(o=t.createLinearGradient(r,0,n,0))}else r=NaN,n=NaN,a=NaN;t.beginPath();var m=0;s.forEach(function(e,i){var n=i.xCoord,s=i.yCoord;if(0===m?t.moveTo(n,s):t.lineTo(n,s),i.isGradientStop()){var l=i.color.value||h,u=i.opacity.value;"number"==typeof u&&(l=l.alpha(u));var d=(i.xCoord-r)/(a||1);o.addColorStop(d,l.toString())}m+=1},this),t.strokeStyle=o||h.toString(),t.lineWidth=u,t.stroke()},e.prototype.hitTestGraph=function(t,e,i,o,r){var n=this._hitWidth,a=this.strokeWidth.value;if(a){var s=this.bounds,l=Math.min(s.width,s.height);n=Math.max(n,a.pxValue(l))}i.beginPath();var h=0;return this._data.forEach(function(t,e){var o=e.xCoord,r=e.yCoord;0===h?i.moveTo(o,r):i.lineTo(o,r),h+=1},this),i.lineWidth=n,i.isPointInStroke(t,e)?this:null},e.fromAny=function(t){if(t instanceof e)return t;if(t instanceof rt);else if("object"==typeof t&&t){t=t;var i=new e;void 0!==t.key&&i.key(t.key),void 0!==t.xAxis&&i.xAxis(t.xAxis),void 0!==t.yAxis&&i.yAxis(t.yAxis);var o=t.data;if(o)for(var r=0,n=o.length;r<n;r+=1)i.insertDatum(o[r]);return void 0!==t.stroke&&i.stroke(t.stroke),void 0!==t.strokeWidth&&i.strokeWidth(t.strokeWidth),void 0!==t.hitWidth&&i.hitWidth(t.hitWidth),void 0!==t.font&&i.font(t.font),void 0!==t.textColor&&i.textColor(t.textColor),i}throw new TypeError(""+t)},_([n.MemberAnimator(o.Color)],e.prototype,"stroke",void 0),_([n.MemberAnimator(i.Length)],e.prototype,"strokeWidth",void 0),e}(rt);et.Line=at;var st=function(t){function e(){var e=t.call(this)||this;return e.fill.setState(o.Color.black()),e}return k(e,t),Object.defineProperty(e.prototype,"viewController",{get:function(){return this._viewController},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"type",{get:function(){return"area"},enumerable:!0,configurable:!0}),e.prototype.onAnimate=function(e){this.fill.onFrame(e),t.prototype.onAnimate.call(this,e)},e.prototype.renderPlot=function(t,e,i){var o,r,n,a,s=this._data,l=s.size,h=this.fill.value,u=this._gradientStops;if(t.beginPath(),l>0){var d=s.firstValue(),c=s.lastValue();if(r=d.xCoord,a=(n=c.xCoord)-r,t.moveTo(d.xCoord,d.yCoord),u&&(o=t.createLinearGradient(r,0,n,0),d.isGradientStop())){var p=d.color.value||h;"number"==typeof(v=d.opacity.value)&&(p=p.alpha(v)),o.addColorStop(0,p.toString())}}else r=NaN,n=NaN,a=NaN;var m=s.values();for(m.next();m.hasNext();){var f=m.next().value;if(t.lineTo(f.xCoord,f.yCoord),f.isGradientStop()){var v;p=f.color.value||h;"number"==typeof(v=f.opacity.value)&&(p=p.alpha(v));var y=(f.xCoord-r)/(a||1);o.addColorStop(y,p.toString())}}for(;m.hasPrevious();){f=m.previous().value;t.lineTo(f.xCoord,f.y2Coord)}l>0&&t.closePath(),t.fillStyle=o||h.toString(),t.fill()},e.prototype.hitTestGraph=function(t,e,i,o,r){var n=this._data,a=n.size;i.beginPath();var s=n.values();if(s.hasNext()){var l=s.next().value;i.moveTo(l.xCoord,l.yCoord)}for(;s.hasNext();){l=s.next().value;i.lineTo(l.xCoord,l.yCoord)}for(;s.hasPrevious();){l=s.previous().value;i.lineTo(l.xCoord,l.y2Coord)}return a>0&&i.closePath(),i.isPointInPath(t,e)?this:null},e.fromAny=function(t){if(t instanceof e)return t;if(t instanceof rt);else if("object"==typeof t&&t){t=t;var i=new e;void 0!==t.key&&i.key(t.key),void 0!==t.xAxis&&i.xAxis(t.xAxis),void 0!==t.yAxis&&i.yAxis(t.yAxis);var o=t.data;if(o)for(var r=0,n=o.length;r<n;r+=1)i.insertDatum(o[r]);return void 0!==t.fill&&i.fill(t.fill),void 0!==t.font&&i.font(t.font),void 0!==t.textColor&&i.textColor(t.textColor),i}throw new TypeError(""+t)},_([n.MemberAnimator(o.Color)],e.prototype,"fill",void 0),e}(rt);et.Area=st;var lt=function(t){function e(){var e=t.call(this)||this;return e.onScaleStart=e.onScaleStart.bind(e),e.onScaleChange=e.onScaleChange.bind(e),e.onScaleEnd=e.onScaleEnd.bind(e),e._fitTopDomain=!0,e._fitRightDomain=!0,e._fitBottomDomain=!0,e._fitLeftDomain=!0,e._trackTopDomain=!0,e._trackRightDomain=!0,e._trackBottomDomain=!0,e._trackLeftDomain=!0,e._topDomainBounds=[!0,!0],e._rightDomainBounds=[!0,!0],e._bottomDomainBounds=[!0,!0],e._leftDomainBounds=[!0,!0],e._topDomainPadding=[null,null],e._rightDomainPadding=[null,null],e._bottomDomainPadding=[null,null],e._leftDomainPadding=[null,null],e._multitouch=null,e._topGesture=null,e._rightGesture=null,e._bottomGesture=null,e._leftGesture=null,e._rescaleTransition=null,e.topGutter.setState(i.Length.px(20)),e.rightGutter.setState(i.Length.px(40)),e.bottomGutter.setState(i.Length.px(20)),e.leftGutter.setState(i.Length.px(40)),e.domainColor.setState(o.Color.black()),e.domainWidth.setState(1),e.domainSerif.setState(6),e.tickMarkColor.setState(o.Color.black()),e.tickMarkWidth.setState(1),e.tickMarkLength.setState(6),e.tickLabelPadding.setState(2),e.gridLineColor.setState(o.Color.transparent()),e.gridLineWidth.setState(0),e.setChildView("surface",new n.GraphicView),e}return k(e,t),Object.defineProperty(e.prototype,"viewController",{get:function(){return this._viewController},enumerable:!0,configurable:!0}),e.prototype.surface=function(t){if(void 0===t){var e=this.getChildView("surface");return n.RenderView.is(e)?e:null}return this.setChildView("surface",t),this},e.prototype.topAxis=function(t){if(void 0===t){var e=this.getChildView("topAxis");return e instanceof Y?e:null}return"string"==typeof t?t=Y.top(t):null!==t&&(t=Y.fromAny(t)),this.setChildView("topAxis",t),this},e.prototype.rightAxis=function(t){if(void 0===t){var e=this.getChildView("rightAxis");return e instanceof Y?e:null}return"string"==typeof t?t=Y.right(t):null!==t&&(t=Y.fromAny(t)),this.setChildView("rightAxis",t),this},e.prototype.bottomAxis=function(t){if(void 0===t){var e=this.getChildView("bottomAxis");return e instanceof Y?e:null}return"string"==typeof t?t=Y.bottom(t):null!==t&&(t=Y.fromAny(t)),this.setChildView("bottomAxis",t),this},e.prototype.leftAxis=function(t){if(void 0===t){var e=this.getChildView("leftAxis");return e instanceof Y?e:null}return"string"==typeof t?t=Y.left(t):null!==t&&(t=Y.fromAny(t)),this.setChildView("leftAxis",t),this},e.prototype.addPlot=function(t){t=et.fromAny(t),this.appendChildView(t)},e.prototype.multitouch=function(t){return void 0===t?this._multitouch:(!0===t?t=v.Multitouch.create():!1===t&&(t=null),this._multitouch&&this._multitouch.surface(null),this._multitouch=t,this._multitouch&&this._multitouch.surface(this.surface()),this)},e.prototype.topGesture=function(t){return void 0===t?this._topGesture:(!0===t?t=v.ScaleGesture.horizontal():!1===t&&(t=null),this._topGesture&&this._topGesture.multitouch(null).ruler(null).scale(null),this._topGesture=t,this._topGesture&&(this._multitouch||this.multitouch(!0),this._topGesture.multitouch(this._multitouch).ruler(this.surface()).scale(this.topAxis().scale.value),this._multitouch&&this.isMounted()&&this._topGesture.attach(this._multitouch),this.reboundTop()),this)},e.prototype.rightGesture=function(t){return void 0===t?this._rightGesture:(!0===t?t=v.ScaleGesture.vertical():!1===t&&(t=null),this._rightGesture&&this._rightGesture.multitouch(null).ruler(null).scale(null),this._rightGesture=t,this._rightGesture&&(this._multitouch||this.multitouch(!0),this._rightGesture.multitouch(this._multitouch).ruler(this.surface()).scale(this.rightAxis().scale.value),this._multitouch&&this.isMounted()&&this._rightGesture.attach(this._multitouch),this.reboundRight()),this)},e.prototype.bottomGesture=function(t){return void 0===t?this._bottomGesture:(!0===t?t=v.ScaleGesture.horizontal():!1===t&&(t=null),this._bottomGesture&&this._bottomGesture.multitouch(null).ruler(null).scale(null),this._bottomGesture=t,this._bottomGesture&&(this._multitouch||this.multitouch(!0),this._bottomGesture.multitouch(this._multitouch).ruler(this.surface()).scale(this.bottomAxis().scale.value),this._multitouch&&this.isMounted()&&this._bottomGesture.attach(this._multitouch),this.reboundBottom()),this)},e.prototype.leftGesture=function(t){return void 0===t?this._leftGesture:(!0===t?t=v.ScaleGesture.vertical():!1===t&&(t=null),this._leftGesture&&this._leftGesture.multitouch(null).ruler(null).scale(null),this._leftGesture=t,this._leftGesture&&(this._multitouch||this.multitouch(!0),this._leftGesture.multitouch(this._multitouch).ruler(this.surface()).scale(this.leftAxis().scale.value),this._multitouch&&this.isMounted()&&this._leftGesture.attach(this._multitouch),this.reboundLeft()),this)},e.prototype.rescaleTransition=function(t){return void 0===t?this._rescaleTransition:(t=null!==t?p.Transition.fromAny(t):null,this._rescaleTransition=t,this)},e.prototype.fitTopDomain=function(t){return void 0===t?this._fitTopDomain:(!this._fitTopDomain&&t&&this.setDirty(!0),this._fitTopDomain=t,this)},e.prototype.fitRightDomain=function(t){return void 0===t?this._fitRightDomain:(!this._fitRightDomain&&t&&this.setDirty(!0),this._fitRightDomain=t,this)},e.prototype.fitBottomDomain=function(t){return void 0===t?this._fitBottomDomain:(!this._fitBottomDomain&&t&&this.setDirty(!0),this._fitBottomDomain=t,this)},e.prototype.fitLeftDomain=function(t){return void 0===t?this._fitLeftDomain:(!this._fitLeftDomain&&t&&this.setDirty(!0),this._fitLeftDomain=t,this)},e.prototype.topDomainBounds=function(t){return void 0===t?this._topDomainBounds:(this._topDomainBounds[0]=t[0],this._topDomainBounds[1]=t[1],this.reboundTop(),this)},e.prototype.rightDomainBounds=function(t){return void 0===t?this._rightDomainBounds:(this._rightDomainBounds[0]=t[0],this._rightDomainBounds[1]=t[1],this.reboundRight(),this)},e.prototype.bottomDomainBounds=function(t){return void 0===t?this._bottomDomainBounds:(this._bottomDomainBounds[0]=t[0],this._bottomDomainBounds[1]=t[1],this.reboundBottom(),this)},e.prototype.leftDomainBounds=function(t){return void 0===t?this._leftDomainBounds:(this._leftDomainBounds[0]=t[0],this._leftDomainBounds[1]=t[1],this.reboundLeft(),this)},e.prototype.topDomainPadding=function(t){return void 0===t?this._topDomainPadding:(this._topDomainPadding[0]=t[0],this._topDomainPadding[1]=t[1],this.setDirty(!0),this)},e.prototype.rightDomainPadding=function(t){return void 0===t?this._rightDomainPadding:(this._rightDomainPadding[0]=t[0],this._rightDomainPadding[1]=t[1],this.setDirty(!0),this)},e.prototype.bottomDomainPadding=function(t){return void 0===t?this._bottomDomainPadding:(this._bottomDomainPadding[0]=t[0],this._bottomDomainPadding[1]=t[1],this.setDirty(!0),this)},e.prototype.leftDomainPadding=function(t){return void 0===t?this._leftDomainPadding:(this._leftDomainPadding[0]=t[0],this._leftDomainPadding[1]=t[1],this.setDirty(!0),this)},e.prototype.topDomain=function(){for(var t=[null,null],e=this.topAxis(),i=this._childViews,o=0,r=i.length;o<r;o+=1){var n=i[o];if(n instanceof et&&n.xAxis()===e){var a=n.xDomain();(null===t[0]||f.Objects.compare(t[0],a[0])<0)&&(t[0]=a[0]),(null===t[1]||f.Objects.compare(t[1],a[1]>0))&&(t[1]=a[1])}}return t},e.prototype.rightDomain=function(){for(var t=[null,null],e=this.rightAxis(),i=this._childViews,o=0,r=i.length;o<r;o+=1){var n=i[o];if(n instanceof et&&n.yAxis()===e){var a=n.yDomain();(null===t[0]||f.Objects.compare(t[0],a[0])<0)&&(t[0]=a[0]),(null===t[1]||f.Objects.compare(t[1],a[1]>0))&&(t[1]=a[1])}}return t},e.prototype.bottomDomain=function(){for(var t=[null,null],e=this.bottomAxis(),i=this._childViews,o=0,r=i.length;o<r;o+=1){var n=i[o];if(n instanceof et&&n.xAxis()===e){var a=n.xDomain();(null===t[0]||f.Objects.compare(t[0],a[0])<0)&&(t[0]=a[0]),(null===t[1]||f.Objects.compare(t[1],a[1]>0))&&(t[1]=a[1])}}return t},e.prototype.leftDomain=function(){for(var t=[null,null],e=this.leftAxis(),i=this._childViews,o=0,r=i.length;o<r;o+=1){var n=i[o];if(n instanceof et&&n.yAxis()===e){var a=n.yDomain();(null===t[0]||f.Objects.compare(t[0],a[0])<0)&&(t[0]=a[0]),(null===t[1]||f.Objects.compare(t[1],a[1]>0))&&(t[1]=a[1])}}return t},e.prototype.topDomainPadded=function(){var t=this.topDomain(),e=t[0],i=t[1],o=this._topDomainPadding,r=o[0],n=o[1];return null!==e&&null!==r&&(e=+e-+r),null!==i&&null!==n&&(i=+i+ +n),[e,i]},e.prototype.rightDomainPadded=function(){var t=this.rightDomain(),e=t[0],i=t[1],o=this._topDomainPadding,r=o[0],n=o[1];return null!==e&&null!==r&&(e=+e-+r),null!==i&&null!==n&&(i=+i+ +n),[e,i]},e.prototype.bottomDomainPadded=function(){var t=this.bottomDomain(),e=t[0],i=t[1],o=this._bottomDomainPadding,r=o[0],n=o[1];return null!==e&&null!==r&&(e=+e-+r),null!==i&&null!==n&&(i=+i+ +n),[e,i]},e.prototype.leftDomainPadded=function(){var t=this.leftDomain(),e=t[0],i=t[1],o=this._leftDomainPadding,r=o[0],n=o[1];return null!==e&&null!==r&&(e=+e-+r),null!==i&&null!==n&&(i=+i+ +n),[e,i]},e.prototype.topRange=function(){for(var t=[1/0,-1/0],e=this.topAxis(),i=this._childViews,o=0,r=i.length;o<r;o+=1){var n=i[o];if(n instanceof et&&n.xAxis()===e){var a=n.xRange();t[0]=Math.min(t[0],a[0]),t[1]=Math.max(t[1],a[1])}}return t},e.prototype.rightRange=function(){for(var t=[1/0,-1/0],e=this.rightAxis(),i=this._childViews,o=0,r=i.length;o<r;o+=1){var n=i[o];if(n instanceof et&&n.yAxis()===e){var a=n.yRange();t[0]=Math.min(t[0],a[0]),t[1]=Math.max(t[1],a[1])}}return t},e.prototype.bottomRange=function(){for(var t=[1/0,-1/0],e=this.bottomAxis(),i=this._childViews,o=0,r=i.length;o<r;o+=1){var n=i[o];if(n instanceof et&&n.xAxis()===e){var a=n.xRange();t[0]=Math.min(t[0],a[0]),t[1]=Math.max(t[1],a[1])}}return t},e.prototype.leftRange=function(){for(var t=[1/0,-1/0],e=this.leftAxis(),i=this._childViews,o=0,r=i.length;o<r;o+=1){var n=i[o];if(n instanceof et&&n.yAxis()===e){var a=n.yRange();t[0]=Math.min(t[0],a[0]),t[1]=Math.max(t[1],a[1])}}return t},e.prototype.onMount=function(){this._multitouch&&(this._multitouch.attach(this),this._topGesture&&this._topGesture.attach(this._multitouch),this._rightGesture&&this._rightGesture.attach(this._multitouch),this._bottomGesture&&this._bottomGesture.attach(this._multitouch),this._leftGesture&&this._leftGesture.attach(this._multitouch)),this.on("scalestart",this.onScaleStart),this.on("scalechange",this.onScaleChange),this.on("scaleend",this.onScaleEnd)},e.prototype.onUnmount=function(){this.off("scalestart",this.onScaleStart),this.off("scalechange",this.onScaleChange),this.off("scaleend",this.onScaleEnd),this._multitouch&&(this._topGesture&&this._topGesture.detach(this._multitouch),this._rightGesture&&this._rightGesture.detach(this._multitouch),this._bottomGesture&&this._bottomGesture.detach(this._multitouch),this._leftGesture&&this._leftGesture.detach(this._multitouch),this._multitouch.detach(this))},e.prototype.willAnimate=function(e){t.prototype.willAnimate.call(this,e),this.autoscale(),this.rebound()},e.prototype.onAnimate=function(t){this.topGutter.onFrame(t),this.rightGutter.onFrame(t),this.bottomGutter.onFrame(t),this.leftGutter.onFrame(t),this.domainColor.onFrame(t),this.domainWidth.onFrame(t),this.domainSerif.onFrame(t),this.tickMarkColor.onFrame(t),this.tickMarkWidth.onFrame(t),this.tickMarkLength.onFrame(t),this.tickLabelPadding.onFrame(t),this.gridLineColor.onFrame(t),this.gridLineWidth.onFrame(t),this.font.onFrame(t),this.textColor.onFrame(t),this._topGesture&&this._topGesture.scale(this.topAxis().scale.value),this._rightGesture&&this._rightGesture.scale(this.rightAxis().scale.value),this._bottomGesture&&this._bottomGesture.scale(this.bottomAxis().scale.value),this._leftGesture&&this._leftGesture.scale(this.leftAxis().scale.value)},e.prototype.layoutSurface=function(t,e){var i=this.topGutter.value.pxValue(e.height),o=this.rightGutter.value.pxValue(e.width),r=this.bottomGutter.value.pxValue(e.height),n=this.leftGutter.value.pxValue(e.width),a=e.xMin+n,l=e.yMin+i,h=e.xMax-o,u=e.yMax-r,d=(a+h)/2,c=(l+u)/2;t.setBounds(new s.BoxR2(a,l,h,u)),t.setAnchor(new s.PointR2(d,c))},e.prototype.layoutAxes=function(t){for(var e=this._childViews,i=0,o=e.length;i<o;i+=1){var r=e[i];if(r instanceof Y){var n=r.key();"topAxis"===n?this.layoutTopAxis(r,t):"rightAxis"===n?this.layoutRightAxis(r,t):"bottomAxis"===n?this.layoutBottomAxis(r,t):"leftAxis"===n&&this.layoutLeftAxis(r,t)}}},e.prototype.layoutTopAxis=function(t,e){var i=this.topGutter.value.pxValue(e.height),o=this.rightGutter.value.pxValue(e.width),r=this.bottomGutter.value.pxValue(e.height),n=this.leftGutter.value.pxValue(e.width),a=e.xMin+n,l=e.yMin+i,h=a,u=e.yMin,d=e.xMax-o,c=e.yMax-r;t.setBounds(new s.BoxR2(h,u,d,c)),t.setAnchor(new s.PointR2(a,l)),t.range(0,d-h)},e.prototype.layoutRightAxis=function(t,e){var i=this.topGutter.value.pxValue(e.height),o=this.rightGutter.value.pxValue(e.width),r=this.bottomGutter.value.pxValue(e.height),n=this.leftGutter.value.pxValue(e.width),a=Math.max(e.xMin+n,e.xMax-o),l=e.yMin+i,h=e.xMin+n,u=l,d=e.xMax,c=e.yMax-r;t.setBounds(new s.BoxR2(h,u,d,c)),t.setAnchor(new s.PointR2(a,l)),t.range(c-u,0)},e.prototype.layoutBottomAxis=function(t,e){var i=this.topGutter.value.pxValue(e.height),o=this.rightGutter.value.pxValue(e.width),r=this.bottomGutter.value.pxValue(e.height),n=this.leftGutter.value.pxValue(e.width),a=e.xMin+n,l=Math.max(e.yMin+i,e.yMax-r),h=a,u=e.yMin+i,d=e.xMax-o,c=e.yMax;t.setBounds(new s.BoxR2(h,u,d,c)),t.setAnchor(new s.PointR2(a,l)),t.range(0,d-h)},e.prototype.layoutLeftAxis=function(t,e){var i=this.topGutter.value.pxValue(e.height),o=this.rightGutter.value.pxValue(e.width),r=this.bottomGutter.value.pxValue(e.height),n=this.leftGutter.value.pxValue(e.width),a=e.xMin+n,l=e.yMin+i,h=e.xMin,u=l,d=e.xMax-o,c=e.yMax-r;t.setBounds(new s.BoxR2(h,u,d,c)),t.setAnchor(new s.PointR2(a,l)),t.range(c-u,0)},e.prototype.layoutPlot=function(t,e){var i=this.topGutter.value.pxValue(e.height),o=this.rightGutter.value.pxValue(e.width),r=this.bottomGutter.value.pxValue(e.height),n=this.leftGutter.value.pxValue(e.width),a=e.xMin+n,l=e.yMin+i,h=e.xMax-o,u=e.yMax-r,d=a,c=l;t.setBounds(new s.BoxR2(a,l,h,u)),t.setAnchor(new s.PointR2(d,c))},e.prototype.onInsertPlot=function(t){if(!t.xAxis()||!t.yAxis())for(var e=this._childViews,i=0,o=e.length;i<o;i+=1){var r=e[i];if(r instanceof Y){var n=r.key();"topAxis"!==n||t.xAxis()?"rightAxis"!==n||t.yAxis()?"bottomAxis"!==n||t.xAxis()?"leftAxis"!==n||t.yAxis()||t.yAxis(r):t.xAxis(r):t.yAxis(r):t.xAxis(r)}}},e.prototype.onRemovePlot=function(t){},e.prototype.onInsertChildView=function(t){var e=t.key();if("surface"===e&&n.RenderView.is(t))this.layoutSurface(t,this._bounds);else if(t instanceof Y){if("topAxis"===e)return void this.layoutTopAxis(t,this._bounds);if("rightAxis"===e)return void this.layoutRightAxis(t,this._bounds);if("bottomAxis"===e)return void this.layoutBottomAxis(t,this._bounds);if("leftAxis"===e)return void this.layoutLeftAxis(t,this._bounds)}else t instanceof et&&(this.onInsertPlot(t),this.layoutPlot(t,this._bounds))},e.prototype.onRemoveChildView=function(t){t instanceof et&&this.onRemovePlot(t)},e.prototype.setChildViewBounds=function(e,i){var o=e.key();if("surface"===o&&n.RenderView.is(e))this.layoutSurface(e,i);else{if(e instanceof Y){if("topAxis"===o)return void this.layoutTopAxis(e,i);if("rightAxis"===o)return void this.layoutRightAxis(e,i);if("bottomAxis"===o)return void this.layoutBottomAxis(e,i);if("leftAxis"===o)return void this.layoutLeftAxis(e,i)}else if(e instanceof et)return void this.layoutPlot(e,i);t.prototype.setChildViewBounds.call(this,e,i)}},e.prototype.setChildViewAnchor=function(e,i){"surface"===e.key()&&n.RenderView.is(e)||e instanceof Y||e instanceof et||t.prototype.setChildViewAnchor.call(this,e,i)},e.prototype.autoscale=function(t){void 0===t&&(t=this._rescaleTransition||void 0),this.autoscaleTop(t),this.autoscaleRight(t),this.autoscaleBottom(t),this.autoscaleLeft(t)},e.prototype.autoscaleTop=function(t){if(this._trackTopDomain){var e=this.topAxis();if(e){void 0===t&&(t=this._rescaleTransition||void 0);var i=this.topDomainPadded(),o=i[0],r=i[1];null!==o&&null!==r&&e.domain(o,r,t)}}},e.prototype.autoscaleRight=function(t){if(this._trackRightDomain){var e=this.rightAxis();if(e){void 0===t&&(t=this._rescaleTransition||void 0);var i=this.rightDomainPadded(),o=i[0],r=i[1];null!==o&&null!==r&&e.domain(o,r,t)}}},e.prototype.autoscaleBottom=function(t){if(this._trackBottomDomain){var e=this.bottomAxis();if(e){void 0===t&&(t=this._rescaleTransition||void 0);var i=this.bottomDomainPadded(),o=i[0],r=i[1];null!==o&&null!==r&&e.domain(o,r,t)}}},e.prototype.autoscaleLeft=function(t){if(this._trackLeftDomain){var e=this.leftAxis();if(e){void 0===t&&(t=this._rescaleTransition||void 0);var i=this.leftDomainPadded(),o=i[0],r=i[1];null!==o&&null!==r&&e.domain(o,r,t)}}},e.prototype.rebound=function(){this.reboundTop(),this.reboundRight(),this.reboundBottom(),this.reboundLeft()},e.prototype.reboundTop=function(){var t=this._topGesture;if(t){var e=this.topDomainPadded(),i=e[0],o=e[1];if(null!==i&&null!==o){var r=this._topDomainBounds,n=r[0],a=r[1];"boolean"!=typeof n&&(i=+i-+n),"boolean"!=typeof a&&(o=+o+ +a),t.domainBounds("boolean"!=typeof n||n?i:null,"boolean"!=typeof a||a?o:null)}}},e.prototype.reboundRight=function(){var t=this._rightGesture;if(t){var e=this.rightDomainPadded(),i=e[0],o=e[1];if(null!==i&&null!==o){var r=this._rightDomainBounds,n=r[0],a=r[1];"boolean"!=typeof n&&(i=+i-+n),"boolean"!=typeof a&&(o=+o+ +a),t.domainBounds("boolean"!=typeof n||n?i:null,"boolean"!=typeof a||a?o:null)}}},e.prototype.reboundBottom=function(){var t=this._bottomGesture;if(t){var e=this.bottomDomainPadded(),i=e[0],o=e[1];if(null!==i&&null!==o){var r=this._bottomDomainBounds,n=r[0],a=r[1];"boolean"!=typeof n&&(i=+i-+n),"boolean"!=typeof a&&(o=+o+ +a),t.domainBounds("boolean"!=typeof n||n?i:null,"boolean"!=typeof a||a?o:null)}}},e.prototype.reboundLeft=function(){var t=this._leftGesture;if(t){var e=this.leftDomainPadded(),i=e[0],o=e[1];if(null!==i&&null!==o){var r=this._leftDomainBounds,n=r[0],a=r[1];"boolean"!=typeof n&&(i=+i-+n),"boolean"!=typeof a&&(o=+o+ +a),t.domainBounds("boolean"!=typeof n||n?i:null,"boolean"!=typeof a||a?o:null)}}},e.prototype.retrackTop=function(){var t=this._topGesture;if(t){var e=t.scale().domain(),i=e[0],o=e[1],r=t.domainMin(),n=t.domainMax();if(null!==i&&null!==o&&null!=r&&null!==n){var a=f.Objects.compare(i,o);(a<0&&f.Objects.compare(i,r)<=0&&f.Objects.compare(o,n)>=0||a>0&&f.Objects.compare(o,r)<=0&&f.Objects.compare(i,n)>=0)&&(this._trackTopDomain=!0)}}},e.prototype.retrackRight=function(){var t=this._rightGesture;if(t){var e=t.scale().domain(),i=e[0],o=e[1],r=t.domainMin(),n=t.domainMax();if(null!==i&&null!==o&&null!=r&&null!==n){var a=f.Objects.compare(i,o);(a<0&&f.Objects.compare(i,r)<=0&&f.Objects.compare(o,n)>=0||a>0&&f.Objects.compare(o,r)<=0&&f.Objects.compare(i,n)>=0)&&(this._trackRightDomain=!0)}}},e.prototype.retrackBottom=function(){var t=this._bottomGesture;if(t){var e=t.scale().domain(),i=e[0],o=e[1],r=t.domainMin(),n=t.domainMax();if(null!==i&&null!==o&&null!=r&&null!==n){var a=f.Objects.compare(i,o);(a<0&&f.Objects.compare(i,r)<=0&&f.Objects.compare(o,n)>=0||a>0&&f.Objects.compare(o,r)<=0&&f.Objects.compare(i,n)>=0)&&(this._trackBottomDomain=!0)}}},e.prototype.retrackLeft=function(){var t=this._leftGesture;if(t){var e=t.scale().domain(),i=e[0],o=e[1],r=t.domainMin(),n=t.domainMax();if(null!==i&&null!==o&&null!=r&&null!==n){var a=f.Objects.compare(i,o);(a<0&&f.Objects.compare(i,r)<=0&&f.Objects.compare(o,n)>=0||a>0&&f.Objects.compare(o,r)<=0&&f.Objects.compare(i,n)>=0)&&(this._trackLeftDomain=!0)}}},e.prototype.onScaleStart=function(t){if(t.gesture===this._topGesture){var e=this.topAxis();e&&e.domain(t.scale.domain()),this._trackTopDomain=!1}else if(t.gesture===this._rightGesture){var i=this.rightAxis();i&&i.domain(t.scale.domain()),this._trackRightDomain=!1}else if(t.gesture===this._bottomGesture){var o=this.bottomAxis();o&&o.domain(t.scale.domain()),this._trackBottomDomain=!1}else if(t.gesture===this._leftGesture){var r=this.leftAxis();r&&r.domain(t.scale.domain()),this._trackLeftDomain=!1}},e.prototype.onScaleChange=function(t){if(t.gesture===this._topGesture){var e=this.topAxis();e&&e.domain(t.scale.domain())}else if(t.gesture===this._rightGesture){var i=this.rightAxis();i&&i.domain(t.scale.domain())}else if(t.gesture===this._bottomGesture){var o=this.bottomAxis();o&&o.domain(t.scale.domain())}else if(t.gesture===this._leftGesture){var r=this.leftAxis();r&&r.domain(t.scale.domain())}},e.prototype.onScaleEnd=function(t){if(t.gesture===this._topGesture){var e=this.topAxis();e&&e.domain(t.scale.domain()),this.retrackTop()}else if(t.gesture===this._rightGesture){var i=this.rightAxis();i&&i.domain(t.scale.domain()),this.retrackRight()}else if(t.gesture===this._bottomGesture){var o=this.bottomAxis();o&&o.domain(t.scale.domain()),this.retrackBottom()}else if(t.gesture===this._leftGesture){var r=this.leftAxis();r&&r.domain(t.scale.domain()),this.retrackLeft()}},e.fromAny=function(t){if(t instanceof e)return t;if("object"==typeof t&&t){var i=new e;void 0!==t.key&&i.key(t.key),void 0!==t.bottomAxis&&i.bottomAxis(t.bottomAxis),void 0!==t.leftAxis&&i.leftAxis(t.leftAxis),void 0!==t.topAxis&&i.topAxis(t.topAxis),void 0!==t.rightAxis&&i.rightAxis(t.rightAxis);var o=t.plots;if(o)for(var r=0,n=o.length;r<n;r+=1)i.addPlot(o[r]);return void 0!==t.fitTopDomain&&i.fitTopDomain(t.fitTopDomain),void 0!==t.fitRightDomain&&i.fitRightDomain(t.fitRightDomain),void 0!==t.fitBottomDomain&&i.fitBottomDomain(t.fitBottomDomain),void 0!==t.fitLeftDomain&&i.fitLeftDomain(t.fitLeftDomain),void 0!==t.topDomainBounds&&i.topDomainBounds(t.topDomainBounds),void 0!==t.rightDomainBounds&&i.rightDomainBounds(t.rightDomainBounds),void 0!==t.bottomDomainBounds&&i.bottomDomainBounds(t.bottomDomainBounds),void 0!==t.leftDomainBounds&&i.leftDomainBounds(t.leftDomainBounds),void 0!==t.topDomainPadding&&i.topDomainPadding(t.topDomainPadding),void 0!==t.rightDomainPadding&&i.rightDomainPadding(t.rightDomainPadding),void 0!==t.bottomDomainPadding&&i.bottomDomainPadding(t.bottomDomainPadding),void 0!==t.leftDomainPadding&&i.leftDomainPadding(t.leftDomainPadding),void 0!==t.multitouch&&i.multitouch(t.multitouch),void 0!==t.topGesture&&i.topGesture(t.topGesture),void 0!==t.rightGesture&&i.rightGesture(t.rightGesture),void 0!==t.bottomGesture&&i.bottomGesture(t.bottomGesture),void 0!==t.leftGesture&&i.leftGesture(t.leftGesture),void 0!==t.rescaleTransition&&i.rescaleTransition(t.rescaleTransition),void 0!==t.topGutter&&i.topGutter(t.topGutter),void 0!==t.rightGutter&&i.rightGutter(t.rightGutter),void 0!==t.bottomGutter&&i.bottomGutter(t.bottomGutter),void 0!==t.leftGutter&&i.leftGutter(t.leftGutter),void 0!==t.domainColor&&i.domainColor(t.domainColor),void 0!==t.domainWidth&&i.domainWidth(t.domainWidth),void 0!==t.domainSerif&&i.domainSerif(t.domainSerif),void 0!==t.tickMarkColor&&i.tickMarkColor(t.tickMarkColor),void 0!==t.tickMarkWidth&&i.tickMarkWidth(t.tickMarkWidth),void 0!==t.tickMarkLength&&i.tickMarkLength(t.tickMarkLength),void 0!==t.tickLabelPadding&&i.tickLabelPadding(t.tickLabelPadding),void 0!==t.gridLineColor&&i.gridLineColor(t.gridLineColor),void 0!==t.gridLineWidth&&i.gridLineWidth(t.gridLineWidth),void 0!==t.font&&i.font(t.font),void 0!==t.textColor&&i.textColor(t.textColor),i}throw new TypeError(""+t)},_([n.MemberAnimator(i.Length)],e.prototype,"topGutter",void 0),_([n.MemberAnimator(i.Length)],e.prototype,"rightGutter",void 0),_([n.MemberAnimator(i.Length)],e.prototype,"bottomGutter",void 0),_([n.MemberAnimator(i.Length)],e.prototype,"leftGutter",void 0),_([n.MemberAnimator(o.Color)],e.prototype,"domainColor",void 0),_([n.MemberAnimator(Number)],e.prototype,"domainWidth",void 0),_([n.MemberAnimator(Number)],e.prototype,"domainSerif",void 0),_([n.MemberAnimator(o.Color)],e.prototype,"tickMarkColor",void 0),_([n.MemberAnimator(Number)],e.prototype,"tickMarkWidth",void 0),_([n.MemberAnimator(Number)],e.prototype,"tickMarkLength",void 0),_([n.MemberAnimator(Number)],e.prototype,"tickLabelPadding",void 0),_([n.MemberAnimator(o.Color)],e.prototype,"gridLineColor",void 0),_([n.MemberAnimator(Number)],e.prototype,"gridLineWidth",void 0),_([n.MemberAnimator(r.Font,"inherit")],e.prototype,"font",void 0),_([n.MemberAnimator(o.Color,"inherit")],e.prototype,"textColor",void 0),e}(n.GraphicView),ht=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return k(e,t),e.prototype.topAxis=function(){var t=this._view;return t?t.topAxis():null},e.prototype.rightAxis=function(){var t=this._view;return t?t.rightAxis():null},e.prototype.bottomAxis=function(){var t=this._view;return t?t.bottomAxis():null},e.prototype.leftAxis=function(){var t=this._view;return t?t.leftAxis():null},e}(n.GraphicViewController),ut=function(){function t(t,e){this._lng=t,this._lat=e}return Object.defineProperty(t.prototype,"lng",{get:function(){return this._lng},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"lat",{get:function(){return this._lat},enumerable:!0,configurable:!0}),t.prototype.toAny=function(){return{lng:this._lng,lat:this._lat}},t.prototype.equals=function(e){return this===e||e instanceof t&&(this._lng===e._lng&&this._lat===e._lat)},t.prototype.debug=function(t){t=t.write("LngLat").write(46).write("from").write(40).debug(this._lng).write(", ").debug(this._lat).write(41)},t.prototype.toString=function(){return y.Format.debug(this)},t.origin=function(){return t._origin||(t._origin=new t(0,0)),t._origin},t.from=function(e,i){return new t(e,i)},t.fromAny=function(e){if(e instanceof t)return e;if(e&&"object"==typeof e){var i=void 0,o=void 0;return Array.isArray(e)?(i=e[0],o=e[1]):(i=e.lng,o=e.lat),t.from(i,o)}throw new TypeError(""+e)},t}(),dt=function(t){function e(e,i){var o=t.call(this)||this;return void 0!==e&&(e=ut.fromAny(e)),void 0!==i&&(i=ut.fromAny(i)),e||i?i?e||(e=i):i=e:i=e=ut.origin(),o.x0=e.lng,o.dx=i.lng-o.x0,o.y0=e.lat,o.dy=i.lat-o.y0,o}return k(e,t),e.prototype.interpolate=function(t){var e=this.x0+this.dx*t,i=this.y0+this.dy*t;return new ut(e,i)},e.prototype.deinterpolate=function(t){var e=(t=ut.fromAny(t)).lng-this.x0,i=t.lat-this.y0,o=e*this.dx+i*this.dy,r=Math.sqrt(e*e+i*i);return r?o/r:r},e.prototype.range=function(t,i){return void 0===t?[this.interpolate(0),this.interpolate(1)]:void 0===i?new e((t=t)[0],t[1]):new e(t,i)},e.prototype.equals=function(t){return this===t||t instanceof e&&(this.x0===t.x0&&this.dx===t.dx&&this.y0===t.y0&&this.dy===t.dy)},e.lngLat=function(t,i){return new e(t,i)},e}(c.Interpolator);c.Interpolator.lngLat=dt.lngLat;var ct=c.Interpolator.from;c.Interpolator.from=function(t,e){return t instanceof ut||e instanceof ut?c.Interpolator.lngLat(t,e):ct(t,e)};var pt={_identity:void 0,identity:function(){return pt._identity||(pt._identity=new mt),pt._identity},is:function(t){if("object"==typeof t&&t){var e=t;return"function"==typeof e.project&&"function"==typeof e.unproject}return!1}},mt=function(){function t(){}return Object.defineProperty(t.prototype,"bounds",{get:function(){return[ut.origin(),ut.origin()]},enumerable:!0,configurable:!0}),t.prototype.project=function(t,e){var i,o;if("number"==typeof t)i=t,o=e;else{var r=ut.fromAny(t);i=r.lng,o=r.lat}return new s.PointR2(i,o)},t.prototype.unproject=function(t,e){var i,o;if("number"==typeof t)i=t,o=e;else{var r=s.PointR2.fromAny(t);i=r.x,o=r.y}return new ut(i,o)},t}(),ft={is:function(t){if("object"==typeof t&&t){var e=t;return e instanceof n.View&&"function"==typeof e.setProjection&&"function"==typeof e.setZoom}return!1}},vt=function(t){function e(e){void 0===e&&(e=null);var i=t.call(this,e)||this;return i._projection=pt.identity(),i._hitBounds=null,i._dirtyProjection=!0,i}return k(e,t),Object.defineProperty(e.prototype,"viewController",{get:function(){return this._viewController},enumerable:!0,configurable:!0}),e.prototype.onInsertChildView=function(t,e){n.RenderView.is(t)&&(this.setChildViewBounds(t,this._bounds),ft.is(t)&&(this.setChildViewProjection(t,this._projection),this.setChildViewZoom(t,this._zoom)),this._culled&&t.setCulled(!0))},e.prototype.project=function(t,e){return this.projection.project.apply(this.projection,arguments)},e.prototype.unproject=function(t,e){return this.projection.unproject.apply(this.projection,arguments)},Object.defineProperty(e.prototype,"projection",{get:function(){return this._projection},enumerable:!0,configurable:!0}),e.prototype.setProjection=function(t){var e=this.willSetProjection(t);void 0!==e&&(t=e),this._projection=t,this._dirtyProjection=!0,this.onSetProjection(t);for(var i=this.childViews,o=0,r=i.length;o<r;o+=1){var n=i[o];ft.is(n)&&this.setChildViewProjection(n,t)}this.didSetProjection(t)},e.prototype.willSetProjection=function(t){var e=this._viewController;if(e){var i=e.viewWillSetProjection(t,this);void 0!==i&&(t=i)}for(var o=this._viewObservers,r=0,n=o.length;r<n;r+=1){var a=o[r];a.viewWillSetProjection&&a.viewWillSetProjection(t,this)}},e.prototype.onSetProjection=function(t){},e.prototype.didSetProjection=function(t){this.didObserve(function(e){e.viewDidSetProjection&&e.viewDidSetProjection(t,this)})},e.prototype.setChildViewProjection=function(t,e){t.setProjection(e)},Object.defineProperty(e.prototype,"zoom",{get:function(){return this._zoom},enumerable:!0,configurable:!0}),e.prototype.setZoom=function(t){this.willSetZoom(t);var e=this._zoom;this._zoom=t,this.onSetZoom(t,e);for(var i=this.childViews,o=0,r=i.length;o<r;o+=1){var n=i[o];ft.is(n)&&this.setChildViewZoom(n,t)}this.didSetZoom(t,e)},e.prototype.willSetZoom=function(t){this.didObserve(function(e){e.viewWillSetZoom&&e.viewWillSetZoom(t,this)})},e.prototype.onSetZoom=function(t,e){t!==e&&this.setDirty(!0)},e.prototype.didSetZoom=function(t,e){this.didObserve(function(i){i.viewDidSetZoom&&i.viewDidSetZoom(t,e,this)})},e.prototype.setChildViewZoom=function(t,e){t.setZoom(e)},e.prototype.onAnimate=function(t){this.projectGeometry()},e.prototype.didAnimate=function(e){t.prototype.didAnimate.call(this,e),this._dirtyProjection=!1},e.prototype.onCull=function(){var t=this._hitBounds;if(null!==t){var e=!this._bounds.intersects(t);this.setCulled(e)}},e.prototype.projectGeometry=function(){for(var t=null,e=this._childViews,i=0,o=e.length;i<o;i+=1){var r=e[i];if(n.RenderView.is(r)){var a=r.hitBounds;a&&(t=t?t.union(a):a)}}this._hitBounds=t},Object.defineProperty(e.prototype,"hitBounds",{get:function(){return this._hitBounds},enumerable:!0,configurable:!0}),e}(n.GraphicView),yt=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return k(e,t),e.prototype.project=function(t,e){return this.projection.project.apply(this.projection,arguments)},e.prototype.unproject=function(t,e){return this.projection.unproject.apply(this.projection,arguments)},Object.defineProperty(e.prototype,"projection",{get:function(){var t=this._view;return t?t.projection:pt.identity()},enumerable:!0,configurable:!0}),e.prototype.viewWillSetProjection=function(t,e){},e.prototype.viewDidSetProjection=function(t,e){},Object.defineProperty(e.prototype,"zoom",{get:function(){var t=this._view;return t?t.zoom:0},enumerable:!0,configurable:!0}),e.prototype.viewWillSetZoom=function(t,e){},e.prototype.viewDidSetZoom=function(t,e,i){},e}(n.GraphicViewController),gt=function(t){function e(e){void 0===e&&(e=null);var i=t.call(this,e)||this;return i._canvas=i.createCanvas(),i}return k(e,t),Object.defineProperty(e.prototype,"canvas",{get:function(){return this._canvas},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"viewController",{get:function(){return this._viewController},enumerable:!0,configurable:!0}),e.prototype.cascadeRender=function(t){var e=this.getContext();if(this.willRender(t,e),this._dirty){this.onRender(t,e);for(var i=this.childViews,o=0,r=i.length;o<r;o+=1){var a=i[o];n.RenderView.is(a)&&a.cascadeRender(e)}}this.didRender(t,e)},e.prototype.willRender=function(e,i){t.prototype.willRender.call(this,e)},e.prototype.onRender=function(e,i){var o=this._bounds;i.clearRect(0,0,o.width,o.height),t.prototype.onRender.call(this,e)},e.prototype.didRender=function(e,i){this.copyLayerImage(e,i),t.prototype.didRender.call(this,e)},e.prototype.copyLayerImage=function(t,e){var i=this._bounds,o=this.pixelRatio,r=e.getImageData(0,0,i.width*o,i.height*o);t.putImageData(r,i.x*o,i.y*o)},e.prototype.onCull=function(){},Object.defineProperty(e.prototype,"parentTransform",{get:function(){return g.Transform.identity()},enumerable:!0,configurable:!0}),e.prototype.willSetBounds=function(e){var i=t.prototype.willSetBounds.call(this,e);i instanceof s.BoxR2&&(e=i);var o=Math.round(e.xMin),r=Math.round(e.yMin),n=Math.round(e.xMax),a=Math.round(e.yMax);return new s.BoxR2(o,r,n,a)},e.prototype.onSetBounds=function(t,e){t.equals(e)||(this.resizeCanvas(this._canvas,t),this.setDirty(!0))},e.prototype.setChildViewBounds=function(t,e){if(0!==e.x||0!==e.y){var i=e.width,o=e.height;e=new s.BoxR2(0,0,i,o)}t.setBounds(e)},e.prototype.setChildViewAnchor=function(t,e){var i=this._bounds,o=i.x,r=i.y;0===o&&0===r||(e=new s.PointR2(e.x-o,e.y-r)),t.setAnchor(e)},e.prototype.hitTest=function(t,e,i){var o=this.getContext(),r=this._bounds;t-=r.x,e-=r.y;for(var a=null,s=this._childViews,l=s.length-1;l>=0;l-=1){var h=s[l];if(n.RenderView.is(h)&&h.bounds.contains(t,e)&&null!==(a=h.hitTest(t,e,o)))break}return a},e.prototype.getContext=function(){return this._canvas.getContext("2d")},e.prototype.createCanvas=function(){return document.createElement("canvas")},e.prototype.resizeCanvas=function(t,e){var i=Math.floor(e.width),o=Math.floor(e.height),r=this.pixelRatio;t.width=i*r,t.height=o*r,t.style.width=i+"px",t.style.height=o+"px",this.getContext().setTransform(r,0,0,r,0,0)},e}(vt),bt=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return k(e,t),e}(yt),xt=function(t){function e(e,i){void 0===e&&(e=ut.origin()),void 0===i&&(i=ut.origin());var o=t.call(this)||this;return o.start.setState(e),o.end.setState(i),o._startPoint=s.PointR2.origin(),o._endPoint=s.PointR2.origin(),o._hitWidth=0,o}return k(e,t),Object.defineProperty(e.prototype,"viewController",{get:function(){return this._viewController},enumerable:!0,configurable:!0}),e.prototype.hitWidth=function(t){return void 0===t?this._hitWidth:(this._hitWidth=t,this)},e.prototype.onAnimate=function(t){var e=this.start.value;this.start.onFrame(t);var i=this.start.value,o=this.end.value;this.end.onFrame(t);var r=this.end.value;this.stroke.onFrame(t),this.strokeWidth.onFrame(t),(this._dirtyProjection||e!==i||o!==r)&&this.projectGeometry()},e.prototype.onRender=function(t){t.save();var e=this._bounds,i=this._anchor;this.renderLine(t,e,i),t.restore()},e.prototype.renderLine=function(t,e,i){var o=this.stroke.value;if(o){var r=this.strokeWidth.value;if(r){var n=this._startPoint,a=this._endPoint;t.beginPath(),t.moveTo(n.x,n.y),t.lineTo(a.x,a.y);var s=Math.min(e.width,e.height);t.lineWidth=r.pxValue(s),t.strokeStyle=o.toString(),t.stroke()}}},e.prototype.onCull=function(){var t=this._bounds,e=this._startPoint,i=this._endPoint,o=!isFinite(e.x)||isFinite(e.y)||!isFinite(i.x)||!isFinite(i.y)||!t.intersectsSegment(new s.SegmentR2(e.x,e.y,i.x,i.y));this.setCulled(o)},e.prototype.projectGeometry=function(){var t=this.project(this.start.value),e=this.project(this.end.value),i=new s.PointR2((t.x+e.x)/2,(t.y+e.y)/2);this._startPoint=t,this._endPoint=e,this._hitBounds=new s.BoxR2(Math.min(t.x,e.x),Math.min(t.y,e.y),Math.max(t.x,e.x),Math.max(t.y,e.y)),this.setAnchor(i)},e.prototype.hitTest=function(e,i,o){var r=t.prototype.hitTest.call(this,e,i,o);if(null===r){o.save();var n=this.pixelRatio;e*=n,i*=n;var a=this._bounds,s=this._anchor;r=this.hitTestLine(e,i,o,a,s),o.restore()}return r},e.prototype.hitTestLine=function(t,e,i,o,r){var n=this._startPoint,a=this._endPoint,s=this._hitWidth,l=this.strokeWidth.value;if(l){var h=Math.min(o.width,o.height);s=Math.max(s,l.pxValue(h))}return i.beginPath(),i.moveTo(n.x,n.y),i.lineTo(a.x,a.y),i.lineWidth=s,i.isPointInStroke(t,e)?this:null},e.fromAny=function(t){if(t instanceof e)return t;if("object"==typeof t&&t){var i=new e;return void 0!==t.key&&i.key(t.key),void 0!==t.start&&i.start(t.start),void 0!==t.end&&i.end(t.end),void 0!==t.stroke&&i.stroke(t.stroke),void 0!==t.strokeWidth&&i.strokeWidth(t.strokeWidth),void 0!==t.hitWidth&&i.hitWidth(t.hitWidth),i}throw new TypeError(""+t)},_([n.MemberAnimator(ut)],e.prototype,"start",void 0),_([n.MemberAnimator(ut)],e.prototype,"end",void 0),_([n.MemberAnimator(o.Color,"inherit")],e.prototype,"stroke",void 0),_([n.MemberAnimator(i.Length,"inherit")],e.prototype,"strokeWidth",void 0),e}(vt),kt=function(t){function e(e,o){void 0===e&&(e=ut.origin()),void 0===o&&(o=i.Length.zero());var r=t.call(this)||this;return r.center.setState(e),r.radius.setState(o),r._hitRadius=0,r}return k(e,t),Object.defineProperty(e.prototype,"viewController",{get:function(){return this._viewController},enumerable:!0,configurable:!0}),e.prototype.hitRadius=function(t){return void 0===t?this._hitRadius:(this._hitRadius=t,this)},e.prototype.onAnimate=function(t){var e=this.center.value;this.center.onFrame(t);var i=this.center.value;this.radius.onFrame(t),this.fill.onFrame(t),this.stroke.onFrame(t),this.strokeWidth.onFrame(t),(this._dirtyProjection||e!==i)&&this.projectGeometry()},e.prototype.onRender=function(t){t.save();var e=this._bounds,i=this._anchor;this.renderCircle(t,e,i),t.restore()},e.prototype.renderCircle=function(t,e,i){var o=Math.min(e.width,e.height);t.beginPath();var r=this.radius.value.pxValue(o);t.arc(i.x,i.y,r,0,2*Math.PI);var n=this.fill.value;n&&(t.fillStyle=n.toString(),t.fill());var a=this.stroke.value;if(a){var s=this.strokeWidth.value;s&&(t.lineWidth=s.pxValue(o)),t.strokeStyle=a.toString(),t.stroke()}},e.prototype.onCull=function(){var t=this._bounds,e=this._anchor,i=Math.min(t.width,t.height),o=this.radius.value.pxValue(i),r=!isFinite(e.x)||!isFinite(e.y)||!isFinite(o)||!t.intersectsCircle(new s.CircleR2(e.x,e.y,o));this.setCulled(r)},Object.defineProperty(e.prototype,"popoverBounds",{get:function(){var t=this.pageTransform.inverse(),e=this._hitBounds;if(null!==e)return e.transform(t);var i=this.anchor.transform(t),o=Math.round(i.x),r=Math.round(i.y);return new s.BoxR2(o,r,o,r)},enumerable:!0,configurable:!0}),e.prototype.projectGeometry=function(){var t=this._bounds,e=this.project(this.center.value),i=Math.min(t.width,t.height),o=this.radius.value.pxValue(i),r=Math.max(this._hitRadius,o);this._hitBounds=new s.BoxR2(e.x-r,e.y-r,e.x+r,e.y+r),this.setAnchor(e)},e.prototype.hitTest=function(e,i,o){var r=t.prototype.hitTest.call(this,e,i,o);if(null===r){var n=this._bounds,a=this._anchor;r=this.hitTestCircle(e,i,o,n,a)}return r},e.prototype.hitTestCircle=function(t,e,i,o,r){var n=Math.min(o.width,o.height),a=this.radius.value.pxValue(n);if(this.fill.value){var s=Math.max(this._hitRadius,a),l=r.x-t,h=r.y-e;if(l*l+h*h<s*s)return this}var u=this.strokeWidth.value;if(this.stroke.value&&u){var d=this.pixelRatio;if(t*=d,e*=d,i.save(),i.beginPath(),i.arc(r.x,r.y,a,0,2*Math.PI),i.lineWidth=u.pxValue(n),i.isPointInStroke(t,e))return i.restore(),this;i.restore()}return null},e.fromAny=function(t){if(t instanceof e)return t;if("object"==typeof t&&t){var i=new e;return void 0!==t.key&&i.key(t.key),void 0!==t.center&&i.center(t.center),void 0!==t.radius&&i.radius(t.radius),void 0!==t.hitRadius&&i.hitRadius(t.hitRadius),void 0!==t.fill&&i.fill(t.fill),void 0!==t.stroke&&i.stroke(t.stroke),void 0!==t.strokeWidth&&i.strokeWidth(t.strokeWidth),i}throw new TypeError(""+t)},_([n.MemberAnimator(ut)],e.prototype,"center",void 0),_([n.MemberAnimator(i.Length)],e.prototype,"radius",void 0),_([n.MemberAnimator(o.Color,"inherit")],e.prototype,"fill",void 0),_([n.MemberAnimator(o.Color,"inherit")],e.prototype,"stroke",void 0),_([n.MemberAnimator(i.Length,"inherit")],e.prototype,"strokeWidth",void 0),e}(vt),_t=function(t){function e(){var e=t.call(this)||this;return e._coords=[],e._points=[],e}return k(e,t),Object.defineProperty(e.prototype,"viewController",{get:function(){return this._viewController},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"coords",{get:function(){return this._coords},enumerable:!0,configurable:!0}),e.prototype.setCoords=function(t,e){for(var i=0,o=Math.min(this._coords.length,t.length);i<o;i+=1){var r=ut.fromAny(t[i]);this._coords[i].setState(r,e)}for(o=t.length;i<o;i+=1){r=ut.fromAny(t[i]);this._coords.push(new n.AnyMemberAnimator(ut,this,r)),this._points.push(s.PointR2.origin()),this.setDirty(!0)}this._coords.length=t.length},Object.defineProperty(e.prototype,"points",{get:function(){return this._points},enumerable:!0,configurable:!0}),e.prototype.appendCoord=function(t){t=ut.fromAny(t),this._coords.push(new n.AnyMemberAnimator(ut,this,t)),this._points.push(s.PointR2.origin()),this.setDirty(!0)},e.prototype.insertCoord=function(t,e){e=ut.fromAny(e),this._coords.splice(t,0,new n.AnyMemberAnimator(ut,this,e)),this._points.splice(t,0,s.PointR2.origin()),this.setDirty(!0)},e.prototype.removeCoord=function(t){this._coords.splice(t,1),this._points.splice(t,1)},e.prototype.onAnimate=function(t){for(var e=!1,i=this._coords,o=0,r=i.length;o<r;o+=1){var n=i[o],a=n.value;n.onFrame(t),a!==n.value&&(e=!0)}this.fill.onFrame(t),this.stroke.onFrame(t),this.strokeWidth.onFrame(t),(this._dirtyProjection||e)&&this.projectGeometry()},e.prototype.onRender=function(t){t.save();var e=this._bounds,i=this._anchor;this.renderPolygon(t,e,i),t.restore()},e.prototype.renderPolygon=function(t,e,i){var o=this._points,r=o.length;if(r>0){t.beginPath();var n=o[0];t.moveTo(n.x,n.y);for(var a=1;a<r;a+=1){var s=o[a];t.lineTo(s.x,s.y)}t.closePath();var l=this.fill.value;l&&(t.fillStyle=l.toString(),t.fill());var h=this.stroke.value;if(h){var u=this.strokeWidth.value;if(u){var d=Math.min(e.width,e.height);t.lineWidth=u.pxValue(d),t.strokeStyle=h.toString(),t.stroke()}}}},e.prototype.onCull=function(){var t=this._hitBounds;if(null!==t){var e=this._bounds,i=!(e.xMin-e.width<=t.xMin&&t.xMax<=e.xMax+e.width&&e.yMin-e.height<=t.yMin&&t.yMax<=e.yMax+e.height)||!e.intersects(t);this.setCulled(i)}else this.setCulled(!0)},e.prototype.projectGeometry=function(){var t=this._coords,e=this._points,i=t.length,o=0,r=0,n=null;if(i>0){for(var a=!1,l=1/0,h=1/0,u=-1/0,d=-1/0,c=0;c<i;c+=1){var p=t[c].value,m=this.project(p);e[c]=m,o+=m.x,r+=m.y,a=a||!isFinite(m.x)||!isFinite(m.y),l=Math.min(l,m.x),h=Math.min(h,m.y),u=Math.max(m.x,u),d=Math.max(m.y,d)}o/=i,r/=i,a||(n=new s.BoxR2(l,h,u,d))}this._hitBounds=n,this.setAnchor(new s.PointR2(o,r))},e.prototype.hitTest=function(e,i,o){var r=t.prototype.hitTest.call(this,e,i,o);if(null===r){o.save();var n=this.pixelRatio;e*=n,i*=n;var a=this._bounds,s=this._anchor;r=this.hitTestPolygon(e,i,o,a,s),o.restore()}return r},e.prototype.hitTestPolygon=function(t,e,i,o,r){var n=this._points,a=n.length;if(a>0){i.beginPath();var s=n[0];i.moveTo(s.x,s.y);for(var l=1;l<a;l+=1){var h=n[l];i.lineTo(h.x,h.y)}if(i.closePath(),this.fill.value&&i.isPointInPath(t,e))return this;if(this.stroke.value){var u=this.strokeWidth.value;if(u){var d=Math.min(o.width,o.height);if(i.lineWidth=u.pxValue(d),i.isPointInStroke(t,e))return this}}}return null},e.fromAny=function(t){if(t instanceof e)return t;if("object"==typeof t&&t){var i=new e;void 0!==t.key&&i.key(t.key),void 0!==t.fill&&i.fill(t.fill),void 0!==t.stroke&&i.stroke(t.stroke),void 0!==t.strokeWidth&&i.strokeWidth(t.strokeWidth);var o=t.coords;if(void 0!==o)for(var r=0,n=o.length;r<n;r+=1)i.appendCoord(o[r]);return i}throw new TypeError(""+t)},_([n.MemberAnimator(o.Color,"inherit")],e.prototype,"fill",void 0),_([n.MemberAnimator(o.Color,"inherit")],e.prototype,"stroke",void 0),_([n.MemberAnimator(i.Length,"inherit")],e.prototype,"strokeWidth",void 0),e}(vt),At=function(){function t(t){this._map=t}return Object.defineProperty(t.prototype,"map",{get:function(){return this._map},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"bounds",{get:function(){var t=this._map.getBounds();return[new ut(t.getWest(),t.getSouth()),new ut(t.getEast(),t.getNorth())]},enumerable:!0,configurable:!0}),t.prototype.project=function(t,e){var i;i="number"==typeof t?new b.LngLat(t,e):t;var o=this._map.project(i),r=o.x,n=o.y;return new s.PointR2(r,n)},t.prototype.unproject=function(t,e){var i;i="number"==typeof t?new b.Point(t,e):Array.isArray(t)?t:new b.Point(t.x,t.y);var o=this._map.unproject(i),r=o.lng,n=o.lat;return new ut(r,n)},t}(),wt=function(t){function e(e,i){void 0===i&&(i=null);var o=t.call(this,i)||this;return o.doZoom=o.doZoom.bind(o),o.onMapLoad=o.onMapLoad.bind(o),o.onMapRender=o.onMapRender.bind(o),o.onMapZoom=o.onMapZoom.bind(o),o._map=e,o._projection=new At(o._map),o._zoom=e.getZoom(),o._zoomTimer=0,o.initMap(o._map),o}return k(e,t),Object.defineProperty(e.prototype,"map",{get:function(){return this._map},enumerable:!0,configurable:!0}),e.prototype.initMap=function(t){t.on("load",this.onMapLoad),t.on("zoom",this.onMapZoom),t.on("render",this.onMapRender)},Object.defineProperty(e.prototype,"viewController",{get:function(){return this._viewController},enumerable:!0,configurable:!0}),e.prototype.onInsertChildView=function(e,i){t.prototype.onInsertChildView.call(this,e,i),n.RenderView.is(e)&&(this.setChildViewBounds(e,this._bounds),ft.is(e)&&this.setChildViewProjection(e,this._projection),this._culled?e.setCulled(!0):e.cascadeCull())},e.prototype.throttleZoom=function(){this._zoomTimer||(this._zoomTimer=setTimeout(this.doZoom,500))},e.prototype.doZoom=function(){this._zoomTimer=0,this.setZoom(this._map.getZoom())},e.prototype.onMapLoad=function(){this._map.off("load",this.onMapLoad)},e.prototype.onMapRender=function(){this.setProjection(this._projection);var t=this.canvasView;t&&t.animate(!0)},e.prototype.onMapZoom=function(){this.throttleZoom()},e.prototype.overlayCanvas=function(){if(this._parentView)return this.canvasView;var t=this._map;n.View.fromNode(t.getContainer());var e=n.View.fromNode(t.getCanvasContainer()).append("canvas");return e.append(this),e},e}(vt);t.GaugeView=M,t.DialView=w,t.SliceView=C,t.PieView=P,t.ChartView=lt,t.ChartViewController=ht,t.TickView=R,t.TopTickView=T,t.RightTickView=L,t.BottomTickView=V,t.LeftTickView=S,t.TickGenerator=q,t.NumberTickGenerator=K,t.TimeTickGenerator=U,t.AxisView=Y,t.AxisViewController=H,t.TopAxisView=J,t.RightAxisView=Q,t.BottomAxisView=X,t.LeftAxisView=$,t.DatumView=tt,t.PlotView=et,t.PlotViewController=it,t.BubblePlotView=ot,t.GraphView=rt,t.GraphViewController=nt,t.LineGraphView=at,t.AreaGraphView=st,t.LngLat=ut,t.LngLatInterpolator=dt,t.MapProjection=pt,t.MapView=ft,t.MapGraphicView=vt,t.MapGraphicViewController=yt,t.MapLayerView=gt,t.MapLayerViewController=bt,t.MapLineView=xt,t.MapCircleView=kt,t.MapPolygonView=_t,t.MapboxProjection=At,t.MapboxView=wt,Object.defineProperty(t,"__esModule",{value:!0})});
//# sourceMappingURL=swim-ux.js.map